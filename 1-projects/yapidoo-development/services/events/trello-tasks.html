
<!DOCTYPE html>
<html lang="en">
<head>
  <meta version="1.0.1">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>trello-tasks - Documentation Portal</title>
  
  <!-- External Stylesheet -->
  <link rel="stylesheet" type="text/css" href="/second-brain/app.css">
  
  <!-- Highlight.js CSS for syntax highlighting -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">

  <!-- KaTeX for LaTeX math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

  <!-- Mermaid for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
  
  <!-- Initialize KaTeX auto-render -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        throwOnError: false
      });
    });
  </script>
  
</head>
<body data-base-url="/second-brain">
  <!-- Mobile Menu Toggle Button -->
  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
  </button>
  
  <!-- Mobile Overlay -->
  <div class="mobile-overlay"></div>
  
  <!-- Image Lightbox -->
  <div id="image-lightbox" class="lightbox" style="display: none;">
    <div class="lightbox-overlay"></div>
    <div class="lightbox-content">
      <button class="lightbox-close" aria-label="Close lightbox">&times;</button>
      <button class="lightbox-prev" aria-label="Previous image">&#8249;</button>
      <button class="lightbox-next" aria-label="Next image">&#8250;</button>
      <img class="lightbox-image" src="" alt="" />
      <div class="lightbox-caption"></div>
      <div class="lightbox-counter"></div>
    </div>
  </div>
  
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2><a href="/second-brain/">üìö Docs Portal</a></h2>
      </div>
      
      
      <!-- Commit Info Banner -->
      <div class="commit-info-banner">
        <div class="commit-icon">üîÑ</div>
        <div class="commit-details">
          <div class="commit-message" title="events service migration guide">
            events service migration guide
          </div>
          <div class="commit-meta">
            <span class="commit-hash">e70d352</span>
            <span class="commit-date">16 seconds ago</span>
          </div>
        </div>
      </div>
      
      
      <!-- Sidebar controls for collapse/expand all -->
      <div class="sidebar-controls">
        <button onclick="collapseAll()" title="Collapse all folders">
          ‚¨ÜÔ∏è Collapse All
        </button>
        <button onclick="expandAll()" title="Expand all folders">
          ‚¨áÔ∏è Expand All
        </button>
      </div>
      
      <nav class="navigation" id="nav-container">
        
        <!-- Navigation will be loaded from navigation.json -->
        <div class="nav-loading">
          <div class="nav-loading-spinner"></div>
          <p>Loading navigation...</p>
        </div>
        
      </nav>
    </aside>
    
    <main class="main-content">
      <div class="content">
        
        <nav class="breadcrumb"><ol><li><a href="/second-brain/">üè† Home</a></li><li><a href="/second-brain/1-projects/">1-projects</a></li><li><a href="/second-brain/1-projects/yapidoo-development/">yapidoo-development</a></li><li><a href="/second-brain/1-projects/yapidoo-development/services/">services</a></li><li><a href="/second-brain/1-projects/yapidoo-development/services/events/">events</a></li></ol></nav>
        <div class="markdown-content">
          <div class="table-of-contents">
<ul>
<li><a href="#trello-import-yapidoo-events-service-net-9">Trello Import ‚Äî Yapidoo Events Service (.NET 9)</a></li>
<ul>
<li><a href="#1-scaffold-solution-repo-structure">1) Scaffold solution + repo structure</a></li>
<li><a href="#2-implement-domain-layer-aggregate-enums-events">2) Implement Domain layer (aggregate + enums + events)</a></li>
<li><a href="#3-data-layer-ef-core-model-migrations">3) Data layer (EF Core model + migrations)</a></li>
<li><a href="#4-infrastructure-layer-repositories-outbox-publisher">4) Infrastructure layer (repositories + outbox publisher)</a></li>
<li><a href="#5-usecases-layer-cqrs-handlers-validators-mapping">5) UseCases layer (CQRS handlers, validators, mapping)</a></li>
<li><a href="#6-api-layer-routes-authnz-health-swagger">6) API layer (routes + authN/Z + health + Swagger)</a></li>
<li><a href="#7-opsobservability-readiness-to-deploy">7) Ops/observability + readiness to deploy</a></li>
<li><a href="#8-testing-acceptance-checklist">8) Testing + acceptance checklist</a></li>
</ul>
</ul>
</div><h1 id="trello-import-yapidoo-events-service-net-9">
        <a href="#trello-import-yapidoo-events-service-net-9" class="header-anchor">
          Trello Import ‚Äî Yapidoo Events Service (.NET 9)
        </a>
      </h1><p>Source docs:</p>
<ul>
<li>Migration guide: <a href="migration-guide.html">migration-guide.md</a></li>
<li>Diagrams: <a href="diagrams.html">diagrams.md</a></li>
</ul>
<p>Import tip: Each <code>##</code> section below is intended to be one Trello card. Checklists use ``.</p>
<hr>
<h2 id="1-scaffold-solution-repo-structure">
        <a href="#1-scaffold-solution-repo-structure" class="header-anchor">
          1) Scaffold solution + repo structure
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#1-project-structure">1. Project Structure</a></li>
<li>Validate architecture against: <a href="diagrams.md#component-diagram">Component Diagram</a></li>
</ul>
<p>Checklist
 Create solution <code>Yapidoo.Service.Events</code> and projects (<code>.Api</code>, <code>.UseCases</code>, <code>.Domain</code>, <code>.Data</code>, <code>.Infrastructure</code>)
 Add project references per guide (Api -&gt; UseCases/Data/Infrastructure, UseCases -&gt; Domain, etc.)
 Set target framework to <code>net9.0</code> for all projects
 Add baseline folders/namespaces to match the guide</p>
<hr>
<h2 id="2-implement-domain-layer-aggregate-enums-events">
        <a href="#2-implement-domain-layer-aggregate-enums-events" class="header-anchor">
          2) Implement Domain layer (aggregate + enums + events)
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#2-domain-layer-yapidooserviceeventsdomain">2. Domain Layer</a></li>
<li>Use as reference: <a href="diagrams.md#class-diagram">Class Diagram</a></li>
</ul>
<p>Checklist
 Add SeedWork (<code>Entity</code>, <code>AuditableEntity</code>, <code>ValueObject</code>, <code>IAggregateRoot</code>, <code>IRepository</code>, <code>IUnitOfWork</code>)
 Add enums (<code>PrivacyTypeEnum</code>, <code>EventStatusEnum</code>, <code>ConditionValueEnum</code>, <code>LogicEnum</code>, <code>LocationTypeEnum</code>)
 Add common entities (<code>Location</code>, <code>Venue</code>)
 Implement <code>Event</code> aggregate (core fields + status/date semantics)
 Implement related entities: <code>Participation</code>, <code>Following</code>, <code>Condition</code>, <code>EventTimeline</code>, <code>EventHashtag</code>, <code>Hashtag</code>, <code>Category</code>
 Add domain events (<code>EventCreatedDomainEvent</code>, etc.)
 Add repository interfaces (<code>IEventRepository</code>, <code>IVenueRepository</code>, <code>IEventHashtagRepository</code>)
 Add domain exceptions (<code>EventDomainException</code>)</p>
<hr>
<h2 id="3-data-layer-ef-core-model-migrations">
        <a href="#3-data-layer-ef-core-model-migrations" class="header-anchor">
          3) Data layer (EF Core model + migrations)
        </a>
      </h2><p>Description
content\1-projects\yapidoo-development\services\events\</p>
<ul>
<li>Follow: <a href="migration-guide.md#3-data--infrastructure-layers-yapidooserviceeventsdata--yapidooserviceeventsinfrastructure">3. Data & Infrastructure Layers</a></li>
<li>DbContext: <a href="migration-guide.md#32-dbcontext">3.2 DbContext</a></li>
</ul>
<p>Checklist
 Add EF Core packages to <code>.Data</code>
 Implement <code>EventDbContext : DbContext, IUnitOfWork</code>
 Add entity configurations (at least <code>EventEntityTypeConfiguration</code> and any required relationships)
 Ensure relationships match the diagram (Event ‚Üî Venue/Location, participations, followers, etc.)
 Create initial migrations and verify DB updates locally</p>
<hr>
<h2 id="4-infrastructure-layer-repositories-outbox-publisher">
        <a href="#4-infrastructure-layer-repositories-outbox-publisher" class="header-anchor">
          4) Infrastructure layer (repositories + outbox publisher)
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#321-outbox--integration-events-recommended">3.2.1 Outbox & Integration Events</a></li>
<li>Keep in mind: <a href="diagrams.md#component-diagram">Component Diagram</a></li>
</ul>
<p>Checklist
 Implement base <code>Repository&lt;T&gt;</code>
 Implement <code>EventRepository</code>, <code>VenueRepository</code>, <code>EventHashtagRepository</code>
 Add Outbox table + model (persist integration events in same transaction)
 Add publisher/background worker to dispatch outbox rows to the bus
 Define integration event contracts/payloads (as per guide suggestions)
 Ensure idempotency strategy for consumers (dedupe key/event id)</p>
<hr>
<h2 id="5-usecases-layer-cqrs-handlers-validators-mapping">
        <a href="#5-usecases-layer-cqrs-handlers-validators-mapping" class="header-anchor">
          5) UseCases layer (CQRS handlers, validators, mapping)
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#4-usecases-layer-yapidooserviceeventsusecases">4. UseCases Layer</a></li>
<li>Validate flows against: <a href="diagrams.md#use-case-diagram">Use Case Diagram</a></li>
</ul>
<p>Checklist
 Add package refs (MediatR, FluentValidation, AutoMapper)
 Implement commands/queries (Create, Update, Join, Leave; plus read/search if needed)
 Implement handlers (<code>CreateEventCommandHandler</code>, <code>UpdateEventCommandHandler</code>, participation handlers)
 Implement validators (<code>CreateEventCommandValidator</code>, etc.)
 Implement DTOs/ViewModels and mapping profile
 Wire domain event handlers (e.g., <code>NotifyInvitedOnEventCreatedHandler</code>) if applicable</p>
<hr>
<h2 id="6-api-layer-routes-authnz-health-swagger">
        <a href="#6-api-layer-routes-authnz-health-swagger" class="header-anchor">
          6) API layer (routes + authN/Z + health + Swagger)
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#5-api-layer-yapidooserviceeventsapi">5. API Layer</a></li>
<li>Controller: <a href="migration-guide.md#52-controller">5.2 Controller</a></li>
<li>Startup: <a href="migration-guide.md#53-programcs-startup-configuration">5.3 Program.cs</a></li>
</ul>
<p>Checklist
 Implement <code>EventsController</code> at route <code>api/events</code>
 Add endpoints for join/leave participation (per guide)
 Configure JWT bearer validation via OIDC discovery + JWKS
 Add authorization policies/scopes (<code>events.read</code>, <code>events.write</code>) and apply to endpoints
 Add Swagger/OpenAPI with correct title/version
 Add <code>/healthz</code> and <code>/readyz</code>
 Register repositories, DbContext, MediatR, AutoMapper, validators</p>
<hr>
<h2 id="7-opsobservability-readiness-to-deploy">
        <a href="#7-opsobservability-readiness-to-deploy" class="header-anchor">
          7) Ops/observability + readiness to deploy
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#0-how-this-service-fits-yapidoo">0. How This Service Fits Yapidoo</a></li>
<li>Consider: <a href="migration-guide.md#9-deployment-checklist">9. Deployment Checklist</a></li>
</ul>
<p>Checklist
 Add structured logging (Serilog) consistent with platform conventions
 Add OpenTelemetry traces/metrics (at least wiring points + exporters per environment)
 Validate readiness checks reflect DB/bus dependencies appropriately
 Verify configuration keys: connection strings, Auth authority, etc.
 Confirm CORS handled at Gateway (not service) as per guide</p>
<hr>
<h2 id="8-testing-acceptance-checklist">
        <a href="#8-testing-acceptance-checklist" class="header-anchor">
          8) Testing + acceptance checklist
        </a>
      </h2><p>Description</p>
<ul>
<li>Follow: <a href="migration-guide.md#8-testing-strategy">8. Testing Strategy</a></li>
</ul>
<p>Checklist
 Unit tests for domain logic + validators
 Integration tests for handlers/repositories (DB)
 Smoke test API endpoints (create/update/join/leave)
 Verify integration events are written to outbox and published
 Verify diagrams still render (Mermaid) after doc changes</p>

        </div>
      
      </div>
    </main>
  </div>

  <!-- External JavaScript -->
  <script src="/second-brain/app.js"></script>
</body>
</html>
