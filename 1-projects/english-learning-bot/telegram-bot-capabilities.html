
<!DOCTYPE html>
<html lang="en">
<head>
  <meta version="1.0.1">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>telegram-bot-capabilities - Documentation Portal</title>
  
  <!-- External Stylesheet -->
  <link rel="stylesheet" type="text/css" href="/second-brain/app.css">
  
  <!-- Highlight.js CSS for syntax highlighting -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">

  <!-- Mermaid for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
  
</head>
<body data-base-url="/second-brain">
  <!-- Mobile Menu Toggle Button -->
  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
  </button>
  
  <!-- Mobile Overlay -->
  <div class="mobile-overlay"></div>
  
  <!-- Image Lightbox -->
  <div id="image-lightbox" class="lightbox" style="display: none;">
    <div class="lightbox-overlay"></div>
    <div class="lightbox-content">
      <button class="lightbox-close" aria-label="Close lightbox">&times;</button>
      <button class="lightbox-prev" aria-label="Previous image">&#8249;</button>
      <button class="lightbox-next" aria-label="Next image">&#8250;</button>
      <img class="lightbox-image" src="" alt="" />
      <div class="lightbox-caption"></div>
      <div class="lightbox-counter"></div>
    </div>
  </div>
  
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2><a href="/second-brain/">üìö Docs Portal</a></h2>
      </div>
      
      
      <!-- Commit Info Banner -->
      <div class="commit-info-banner">
        <div class="commit-icon">üîÑ</div>
        <div class="commit-details">
          <div class="commit-message" title="PARA update">
            PARA update
          </div>
          <div class="commit-meta">
            <span class="commit-hash">3c7f0eb</span>
            <span class="commit-date">26 seconds ago</span>
          </div>
        </div>
      </div>
      
      
      <!-- Sidebar controls for collapse/expand all -->
      <div class="sidebar-controls">
        <button onclick="collapseAll()" title="Collapse all folders">
          ‚¨ÜÔ∏è Collapse All
        </button>
        <button onclick="expandAll()" title="Expand all folders">
          ‚¨áÔ∏è Expand All
        </button>
      </div>
      
      <nav class="navigation" id="nav-container">
        
        <!-- Navigation will be loaded from navigation.json -->
        <div class="nav-loading">
          <div class="nav-loading-spinner"></div>
          <p>Loading navigation...</p>
        </div>
        
      </nav>
    </aside>
    
    <main class="main-content">
      <div class="content">
        
        <nav class="breadcrumb"><ol><li><a href="/second-brain/">üè† Home</a></li><li><a href="/second-brain/1-projects/">1-projects</a></li><li><a href="/second-brain/1-projects/english-learning-bot/">english-learning-bot</a></li></ol></nav>
        <div class="markdown-content">
          <div class="table-of-contents">
<ul>
<li><a href="#-telegram-bot-">–©–æ –≤–º—ñ—î Telegram Bot –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É</a></li>
<li><a href="#-">–Ø–∫ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —É—Ä–æ–∫—ñ–≤</a></li>
<li><a href="#-net-9-cqrs">–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—ñ–¥ .NET 9 + CQRS</a></li>
<li><a href="#net-9-c">.NET 9: —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (C#)</a></li>
<li><a href="#-markdown">–ü–æ—Ä–∞–¥–∏ –∑ –ø–æ–±—É–¥–æ–≤–∏ —É—Ä–æ–∫—ñ–≤ –Ω–∞ Markdown</a></li>
<li><a href="#-mini-app-web-app">–ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω Mini App (Web App)</a></li>
</ul>
</div><p>–ö–ª–∞—Å–Ω–æ! –ó—ñ–±—Ä–∞–≤ –¥–ª—è —Ç–µ–±–µ ‚Äú–º–∞–ø—É –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π‚Äù Telegram Bot‚Äô–∞ —Å–∞–º–µ –ø—ñ–¥ –Ω–∞–≤—á–∞–ª—å–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ (—Ç–µ–∫—Å—Ç/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è/–∞—É–¥—ñ–æ/–≤—ñ–¥–µ–æ/–≤—ñ–∫—Ç–æ—Ä–∏–Ω–∏) + —è–∫ —Ü–µ –∑—Ä—É—á–Ω–æ –∫–ª–∞—Å—Ç–∏ –Ω–∞ .NET 9, PostgreSQL —ñ Dragonfly —É —Å—Ç–∏–ª—ñ CQRS.</p>
<h1 id="-telegram-bot-">
        <a href="#-telegram-bot-" class="header-anchor">
          –©–æ –≤–º—ñ—î Telegram Bot –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É
        </a>
      </h1><p><strong>–Ø–∫ –¥–æ—Å—Ç–∞–≤–ª—è—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç—É</strong></p>
<ul>
<li><strong>Webhooks</strong> (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É): Telegram –ø—É—à–∏—Ç—å <code>Update</code> –Ω–∞ —Ç–≤—ñ–π HTTPS-–µ–Ω–¥–ø–æ–π–Ω—Ç. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>Long polling</strong>: –±–æ—Ç –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ —Ç—è–≥–Ω–µ <code>getUpdates</code>. –û–±–∏–¥–≤–∞ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –¥–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤—ñ <code>Update</code>. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
</ul>
<p><strong>–§–æ—Ä–º–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —ñ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è</strong></p>
<ul>
<li><strong>–¢–µ–∫—Å—Ç</strong>: –¥–æ <strong>4096</strong> —Å–∏–º–≤–æ–ª—ñ–≤ –ø—ñ—Å–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É –µ–Ω—Ç–∏—Ç—ñ–∑. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ <strong>MarkdownV2/HTML</strong> (–∂–∏—Ä–Ω–∏–π, –∫—É—Ä—Å–∏–≤, –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è, <del>–∑–∞–∫—Ä–µ—Å–ª–µ–Ω–Ω—è</del>, <strong>—Å–ø–æ–π–ª–µ—Ä–∏</strong>, —Ü–∏—Ç–∞—Ç–∏/—Ä–æ–∑–≥–æ—Ä–Ω—ñ —Ü–∏—Ç–∞—Ç–∏, —ñ–Ω–ª–∞–π–Ω-–ø–æ—Å–∏–ª–∞–Ω–Ω—è, <code>code</code>, <code>pre</code> –∑ –ø—ñ–¥—Å–≤—ñ—Ç–∫–æ—é). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ú–µ–¥—ñ–∞ + –ø—ñ–¥–ø–∏—Å–∏</strong>: caption –¥–æ <strong>0‚Äì1024</strong> —Å–∏–º–≤–æ–ª—ñ–≤ (–ø—ñ—Å–ª—è –ø–∞—Ä—Å–∏–Ω–≥—É). –Ñ –æ–ø—Ü—ñ—è –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ caption <strong>–Ω–∞–¥</strong> –º–µ–¥—ñ–∞. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</strong>: <code>sendPhoto</code> (–∑ caption + —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–í—ñ–¥–µ–æ / GIF (animation) / video notes</strong>: <code>sendVideo</code>, <code>sendAnimation</code>, <code>sendVideoNote</code>. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ê—É–¥—ñ–æ</strong>: <code>sendAudio</code> (—Ç—Ä–µ–∫–∏ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏) —ñ <code>sendVoice</code> (–≥–æ–ª–æ—Å–æ–≤—ñ). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–î–æ–∫—É–º–µ–Ω—Ç–∏/PDF</strong>: <code>sendDocument</code>. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ê–ª—å–±–æ–º–∏ (media groups)</strong>: <strong>2‚Äì10</strong> –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –ø–∞–∫–µ—Ç—ñ: —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ, –∞ —Ç–∞–∫–æ–∂ –¥–æ–∫—É–º–µ–Ω—Ç–∏/–∞—É–¥—ñ–æ –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è (–∑–∞–∑–≤–∏—á–∞–π —Ç–∏–ø–∏ –Ω–µ –∑–º—ñ—à—É—é—Ç—å —É –æ–¥–Ω–æ–º—É –∞–ª—å–±–æ–º—ñ). (<a href="https://pipedream.com/apps/telegram-bot-api/actions/send-album?utm_source=chatgpt.com" title="Send an Album (Media Group) with Telegram API">Pipedream</a>, <a href="https://docs.aiogram.dev/en/latest/api/methods/send_media_group.html?utm_source=chatgpt.com" title="sendMediaGroup - aiogram 3.22.0 documentation">docs.aiogram.dev</a>)</li>
<li><strong>–û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –π –≤—ñ–∫—Ç–æ—Ä–∏–Ω–∏</strong>: <code>sendPoll</code> —ñ–∑ —Ç–∏–ø–æ–º <code>&quot;quiz&quot;</code>, <code>correct_option_id</code>, –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º —Ç–æ—â–æ. –ó <strong>–ª–∏–ø–Ω—è 2025</strong>‚Äî–¥–æ <strong>12 –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤</strong> —É poll. (<a href="https://core.telegram.org/bots/api-changelog?utm_source=chatgpt.com" title="Bot API changelog">core.telegram.org</a>)</li>
<li><strong>–õ—ñ–Ω–∫-–ø—Ä–µ–≤‚Äô—é</strong>: –≥–Ω—É—á–∫—ñ <code>LinkPreviewOptions</code>. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ó–∞—Ö–∏—Å—Ç –∫–æ–Ω—Ç–µ–Ω—Ç—É</strong>: <code>protect_content</code> –∑–∞–±–æ—Ä–æ–Ω—è—î –ø–µ—Ä–µ—Å–∏–ª–∞–Ω–Ω—è/–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤</strong>: –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–π—Å—è <code>file_id</code> (–±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–∏—Ö –∞–ø–ª–æ–∞–¥—ñ–≤). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–õ—ñ–º—ñ—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏</strong>: —Ç–∏–ø–æ–≤–æ <strong>–¥–æ 30 –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å/—Å–µ–∫</strong> (—î ‚ÄúPaid Broadcasts‚Äù –¥–ª—è 1000/—Å–µ–∫ —É –∑—ñ—Ä–∫–∞—Ö). –û–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ –æ–±—Ä–æ–±–ª—è–π 429. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>–í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏/—à–≤–∏–¥–∫–µ —Å–∫–∞—á—É–≤–∞–Ω–Ω—è</strong>: –ª–æ–∫–∞–ª—å–Ω–∏–π Bot API —Å–µ—Ä–≤–µ—Ä –¥–æ–∑–≤–æ–ª—è—î <strong>upload –¥–æ 2000 MB</strong> —ñ —ñ–Ω—à—ñ –ø–ª—é—à–∫–∏. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
</ul>
<p><strong>–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</strong></p>
<ul>
<li><strong>–ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∏</strong>: Reply/Inline. –î–ª—è inline-–∫–Ω–æ–ø–æ–∫ <code>callback_data</code> ‚â§ <strong>64 –±–∞–π—Ç–∏</strong> (–∫–ª–∞–¥–∏ –ª–∏—à–µ –∫–æ—Ä–æ—Ç–∫—ñ —Ç–æ–∫–µ–Ω–∏/–∫–ª—é—á—ñ —Å—Ç–∞–Ω—É). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>Web Apps (Mini Apps)</strong> –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ Telegram: –≤—ñ–¥–∫—Ä–∏–≤–∞—é—Ç—å—Å—è –∑ –∫–Ω–æ–ø–∫–∏ <code>web_app</code>, –º–æ–∂—É—Ç—å –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –¥–∞–Ω—ñ –±–æ—Ç—É —á–µ—Ä–µ–∑ <code>Telegram.WebApp.sendData</code> (–∫–Ω–æ–ø–∫–∞-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞) –∞–±–æ –ø–∏—Å–∞—Ç–∏ –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (inline-–∫–Ω–æ–ø–∫–∞). –Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Ñ–æ—Ä–º, —Ç–∞–±–ª–∏—Ü—å, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –≤–ø—Ä–∞–≤. (<a href="https://core.telegram.org/bots/webapps?utm_source=chatgpt.com" title="Telegram Mini Apps">core.telegram.org</a>)</li>
</ul>
<h1 id="-">
        <a href="#-" class="header-anchor">
          –Ø–∫ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —É—Ä–æ–∫—ñ–≤
        </a>
      </h1><ul>
<li><p><strong>–¢–µ–∫—Å—Ç–æ–≤—ñ —É—Ä–æ–∫–∏</strong>: MarkdownV2/HTML + —Ä–æ–∑–¥—ñ–ª–∏/—Å–ø–æ–π–ª–µ—Ä–∏ + –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è ‚Äú–î–∞–ª—ñ/–ù–∞–∑–∞–¥‚Äù –Ω–∞ inline-–∫–Ω–æ–ø–∫–∞—Ö. –°–ª—ñ–¥–∫—É–π –∑–∞ –µ—Å–∫–µ–π–ø–æ–º —É MarkdownV2. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</p>
</li>
<li><p><strong>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è/—Å—Ö–µ–º–∏</strong>: <code>sendPhoto</code> –∑ –ø—ñ–¥–ø–∏—Å–æ–º (–¥–æ 1024 —Å–∏–º–≤.). –°–µ—Ä—ñ—ó —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π ‚Äî —á–µ—Ä–µ–∑ <code>sendMediaGroup</code>. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>, <a href="https://pipedream.com/apps/telegram-bot-api/actions/send-album?utm_source=chatgpt.com" title="Send an Album (Media Group) with Telegram API">Pipedream</a>)</p>
</li>
<li><p><strong>–ê—É–¥—ñ–æ</strong>:</p>
<ul>
<li><strong>–°–ª—É—Ö–∞–Ω–Ω—è</strong> ‚Äî <code>sendAudio</code> (–Ω–∞–∑–≤–∞/–≤–∏–∫–æ–Ω–∞–≤–µ—Ü—å/–æ–±–∫–ª–∞–¥–∏–Ω–∫–∞);</li>
<li><strong>Speaking practice</strong> ‚Äî <code>sendVoice</code> (–∫–æ—Ä–æ—Ç–∫—ñ –≥–æ–ª–æ—Å–æ–≤—ñ). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
</ul>
</li>
<li><p><strong>–í—ñ–¥–µ–æ</strong>: <code>sendVideo</code> –¥–ª—è —Ä–æ–ª–∏–∫—ñ–≤ —É—Ä–æ–∫—É; –∫–æ—Ä–æ—Ç–∫—ñ –ø—ñ–¥–∫–∞–∑–∫–∏ ‚Äî <code>sendAnimation</code> (mp4-gif). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</p>
</li>
<li><p><strong>–¢–∞–±–ª–∏—Ü—ñ</strong>: —É —Å–∞–º–æ–º—É —á–∞—Ç—ñ —Ç–∞–±–ª–∏—Ü—å –Ω–µ–º–∞ ‚Äî –≤–∞—Ä—ñ–∞–Ω—Ç–∏:</p>
<ol>
<li>–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω–∞ ‚Äú–ø—Å–µ–≤–¥–æ-—Ç–∞–±–ª–∏—Ü—è‚Äù –≤ <code>pre</code>;</li>
<li>–ö–∞—Ä—Ç–∏–Ω–∫–∞ —Ç–∞–±–ª–∏—Ü—ñ (PNG/PDF —á–µ—Ä–µ–∑ <code>sendDocument</code>);</li>
<li><strong>Mini App</strong> —ñ–∑ —Ä–µ–∞–ª—å–Ω–æ—é HTML-—Ç–∞–±–ª–∏—Ü–µ—é + —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è/—Ñ—ñ–ª—å—Ç—Ä–∏. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
</ol>
</li>
<li><p><strong>–í—ñ–∫—Ç–æ—Ä–∏–Ω–∏</strong>: <code>sendPoll(type=&quot;quiz&quot;)</code>, –∑ <code>correct_option_id</code>, <code>explanation</code>. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç—Ä–µ–∫–∞—é—Ç—å—Å—è <code>Update.poll</code>, –∞–±–æ ‚Äú–∑–∞–∫—Ä–∏–π‚Äù poll (<code>stopPoll</code>) —ñ –∑—á–∏—Ç–∞–π —Ñ—ñ–Ω–∞–ª. (<a href="https://stackoverflow.com/questions/78325403/telegram-bot-get-poll-results?utm_source=chatgpt.com" title="Telegram bot - Get poll results">Stack Overflow</a>)</p>
</li>
</ul>
<h1 id="-net-9-cqrs">
        <a href="#-net-9-cqrs" class="header-anchor">
          –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—ñ–¥ .NET 9 + CQRS
        </a>
      </h1><div class="mermaid">flowchart LR
  subgraph TG[Telegram]
    U[User] -->|messages| Bot
    Bot -.->|WebApp Mini App| WebView[In-Telegram WebView]
  end

  Bot -->|Webhook JSON Update| API[.NET 9 Minimal API]
  API --> Pipe[Mediator Pipeline: Logging, Validation, RateLimit]
  Pipe --> UC[UseCases CQRS]
  UC --> Repo[PostgreSQL]
  UC --> Cache[Dragonfly<br/>Redis-compatible]
  UC --> FS[File Storage / TG file_id cache]
  UC --> Ev[Progress/Events]

  WebView --->|sendData / web_app_query| Bot
  API -->|SendMessage/Media/Poll| TG</div><ul>
<li><strong>Webhook endpoint</strong> –ø—Ä–∏–π–º–∞—î <code>Update</code>, –∫–∏–¥–∞—î –≤ Mediator (Commands/Queries).</li>
<li><strong>PostgreSQL</strong>: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ, –ø—Ä–æ–≥—Ä–µ—Å, —Å–ø—Ä–æ–±–∏ –≤—ñ–∫—Ç–æ—Ä–∏–Ω, –º–∞–ø–∞ <code>lesson_asset_id ‚Üí file_id</code>.</li>
<li><strong>Dragonfly</strong>: —Å–µ—Å—ñ—ó/—Å—Ç–∞–Ω–∏ –∫—Ä–æ–∫—ñ–≤ —É—Ä–æ–∫—É, throttling, –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è –∞–ø–¥–µ–π—Ç—ñ–≤.</li>
<li><strong>–§–∞–π–ª–∏</strong>: –ø–µ—Ä—à–∏–π upload ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î—à <code>file_id</code> ‚Üí –¥–∞–ª—ñ —à–ª–µ—à –ø–æ <code>file_id</code> (–º–∏—Ç—Ç—î–≤–æ). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><strong>Mini App</strong>: –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ, —Å–∫–ª–∞–¥–Ω—ñ —Ñ–æ—Ä–º–∏, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è, –≥—Ä–∞—Ñ—ñ–∫–∏ ‚Äî –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –∑ <code>web_app</code>-–∫–Ω–æ–ø–∫–∏, –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–∑–∞–¥ —É –±–æ—Ç. (<a href="https://core.telegram.org/bots/webapps?utm_source=chatgpt.com" title="Telegram Mini Apps">core.telegram.org</a>)</li>
</ul>
<h1 id="net-9-c">
        <a href="#net-9-c" class="header-anchor">
          .NET 9: —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (C#)
        </a>
      </h1><p><strong>–ü–∞–∫–µ—Ç</strong></p>
<ul>
<li>–í—ñ–∑—å–º–∏ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π <code>Telegram.Bot</code> (–∞–∫—Ç–∏–≤–Ω–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è, –ø—Ä–∏–∫–ª–∞–¥–∏ —î, –ø—ñ–¥—Ç—Ä–∏–º—É—î Bot API 9.x). (<a href="https://github.com/TelegramBots/Telegram.Bot" title="GitHub - TelegramBots/Telegram.Bot: .NET Client for Telegram Bot API">GitHub</a>)</li>
</ul>
<p><strong>Webhook Minimal API (Program.cs)</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">using</span> Telegram.Bot;
<span class="hljs-keyword">using</span> Telegram.Bot.Types;
<span class="hljs-keyword">using</span> Telegram.Bot.Types.Enums;

<span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(<span class="hljs-keyword">args</span>);
builder.Services.AddHttpClient(<span class="hljs-string">&quot;tg&quot;</span>).AddTypedClient&lt;ITelegramBotClient&gt;(http =&gt;
    <span class="hljs-keyword">new</span> TelegramBotClient(builder.Configuration[<span class="hljs-string">&quot;Telegram:Token&quot;</span>]!, http));

<span class="hljs-keyword">var</span> app = builder.Build();

app.MapPost(<span class="hljs-string">&quot;/webhook/update&quot;</span>, <span class="hljs-keyword">async</span> (Update update, ITelegramBotClient bot, ILoggerFactory lf) =&gt;
{
    <span class="hljs-keyword">var</span> log = lf.CreateLogger(<span class="hljs-string">&quot;TG&quot;</span>);
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">switch</span> (update.Type)
        {
            <span class="hljs-keyword">case</span> UpdateType.Message <span class="hljs-keyword">when</span> update.Message!.Text <span class="hljs-keyword">is</span> { } text:
                <span class="hljs-keyword">await</span> bot.SendMessage(update.Message.Chat.Id,
                    <span class="hljs-string">$&quot;–ü—Ä–∏–≤—ñ—Ç! –¢–∏ –Ω–∞–ø–∏—Å–∞–≤: &lt;b&gt;<span class="hljs-subst">{System.Net.WebUtility.HtmlEncode(text)}</span>&lt;/b&gt;&quot;</span>,
                    parseMode: ParseMode.Html);
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> UpdateType.CallbackQuery:
                <span class="hljs-keyword">var</span> data = update.CallbackQuery!.Data; <span class="hljs-comment">// ‚â§ 64 –±–∞–π—Ç–∏</span>
                <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> –†–æ–∑–ø–∞—Ä—Å–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–æ–∫–µ–Ω, –¥—ñ—Å—Ç–∞–Ω—å —Å—Ç–∞–Ω —ñ–∑ Dragonfly, –≤–∏–∫–æ–Ω–∞–π UseCase</span>
                <span class="hljs-keyword">await</span> bot.AnswerCallbackQuery(update.CallbackQuery.Id);
                <span class="hljs-keyword">break</span>;

            <span class="hljs-keyword">case</span> UpdateType.PollAnswer:
                <span class="hljs-comment">// –∑–±–µ—Ä–µ–≥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–∞ –≤—ñ–∫—Ç–æ—Ä–∏–Ω—É</span>
                <span class="hljs-keyword">break</span>;
        }
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        log.LogError(ex, <span class="hljs-string">&quot;Update handling failed&quot;</span>);
    }
    <span class="hljs-keyword">return</span> Results.Ok();
});

app.Run();</code></pre><blockquote>
<p>–ü—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è webhooks/Minimal API —î –≤ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É —Ä–µ–ø–æ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤. (<a href="https://github.com/TelegramBots/Telegram.Bot.Examples?utm_source=chatgpt.com" title="Examples for the Telegram.Bot C# Library">GitHub</a>)</p>
</blockquote>
<p><strong>–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ —Ç–µ–∫—Å—Ç + MarkdownV2</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">await</span> bot.SendMessage(chatId,
    <span class="hljs-string">&quot;*Lesson 1: Phrasal Verbs*\n&quot;</span> +
    <span class="hljs-string">&quot;‚Ä¢ to *pick up*\n‚Ä¢ to _carry on_\n\n&quot;</span> +
    <span class="hljs-string">&quot;&gt;Hint: use them in sentences&quot;</span>,
    parseMode: ParseMode.MarkdownV2);</code></pre><p>(–ï–∫—Ä–∞–Ω—É–π —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏ –∑–≥—ñ–¥–Ω–æ –ø—Ä–∞–≤–∏–ª MarkdownV2). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</p>
<p><strong>–§–æ—Ç–æ –∑ –ø—ñ–¥–ø–∏—Å–æ–º</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">await</span> bot.SendPhoto(chatId, InputFile.FromUri(imgUrl),
    caption: <span class="hljs-string">&quot;&lt;b&gt;Present Simple&lt;/b&gt;: he/she/it adds &lt;code&gt;-s&lt;/code&gt;&quot;</span>,
    parseMode: ParseMode.Html);</code></pre><p><strong>–ê–ª—å–±–æ–º (—Å–µ—Ä—ñ—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π)</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">var</span> media = <span class="hljs-keyword">new</span> IAlbumInputMedia[] {
    <span class="hljs-keyword">new</span> InputMediaPhoto(InputFile.FromUri(url1)) { Caption = <span class="hljs-string">&quot;Step 1&quot;</span> },
    <span class="hljs-keyword">new</span> InputMediaPhoto(InputFile.FromUri(url2)) { Caption = <span class="hljs-string">&quot;Step 2&quot;</span> },
};
<span class="hljs-keyword">await</span> bot.SendMediaGroup(chatId, media);</code></pre><p>(2‚Äì10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤; –º—ñ–∫—Å —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ –ø—Ä–∞—Ü—é—î, –¥–æ–∫—É–º–µ–Ω—Ç–∏/–∞—É–¥—ñ–æ ‚Äî –∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏). (<a href="https://pipedream.com/apps/telegram-bot-api/actions/send-album?utm_source=chatgpt.com" title="Send an Album (Media Group) with Telegram API">Pipedream</a>, <a href="https://docs.aiogram.dev/en/latest/api/methods/send_media_group.html?utm_source=chatgpt.com" title="sendMediaGroup - aiogram 3.22.0 documentation">docs.aiogram.dev</a>)</p>
<p><strong>–ö–Ω–æ–ø–∫–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">var</span> kb = <span class="hljs-keyword">new</span> InlineKeyboardMarkup(<span class="hljs-keyword">new</span>[]
{
    <span class="hljs-keyword">new</span>[] { InlineKeyboardButton.WithCallbackData(<span class="hljs-string">&quot;‚¨ÖÔ∏è –ù–∞–∑–∞–¥&quot;</span>, <span class="hljs-string">&quot;prev&quot;</span>), InlineKeyboardButton.WithCallbackData(<span class="hljs-string">&quot;–î–∞–ª—ñ ‚û°Ô∏è&quot;</span>, <span class="hljs-string">&quot;next&quot;</span>) },
    <span class="hljs-keyword">new</span>[] { InlineKeyboardButton.WithWebApp(<span class="hljs-string">&quot;–í—ñ–¥–∫—Ä–∏—Ç–∏ –≤–ø—Ä–∞–≤—É&quot;</span>, <span class="hljs-keyword">new</span> WebAppInfo(<span class="hljs-string">&quot;https://your-mini-app.example/app&quot;</span>)) }
});
<span class="hljs-keyword">await</span> bot.SendMessage(chatId, <span class="hljs-string">&quot;–£—Ä–æ–∫ 1: –í—Å—Ç—É–ø&quot;</span>, replyMarkup: kb, parseMode: ParseMode.Html);</code></pre><p>(Web App –≤—ñ–¥–∫—Ä–∏—î—Ç—å—Å—è –≤ Telegram —ñ –º–æ–∂–µ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ <code>sendData</code> –∞–±–æ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ —ñ–º–µ–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚Äî –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É –∫–Ω–æ–ø–∫–∏). (<a href="https://core.telegram.org/bots/webapps?utm_source=chatgpt.com" title="Telegram Mini Apps">core.telegram.org</a>)</p>
<p><strong>–í—ñ–∫—Ç–æ—Ä–∏–Ω–∞ (quiz)</strong></p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">var</span> msg = <span class="hljs-keyword">await</span> bot.SendPoll(
    chatId,
    question: <span class="hljs-string">&quot;Choose the correct article:&quot;</span>,
    options: <span class="hljs-keyword">new</span>[] { <span class="hljs-string">&quot;a apple&quot;</span>, <span class="hljs-string">&quot;an apple&quot;</span>, <span class="hljs-string">&quot;the apple&quot;</span>, <span class="hljs-string">&quot;‚Äî&quot;</span> },
    type: PollType.Quiz,
    correctOptionId: <span class="hljs-number">1</span>,
    explanation: <span class="hljs-string">&quot;–ü–µ—Ä–µ–¥ –≥–æ–ª–æ—Å–Ω–∏–º–∏ –∑–≤—É–∫–∞–º–∏ –≤–∂–∏–≤–∞—î–º–æ &lt;b&gt;an&lt;/b&gt;.&quot;</span>,
    explanationParseMode: ParseMode.Html
);
<span class="hljs-comment">// –ó–±–µ—Ä–µ–∂–∏ msg.Chat.Id + msg.MessageId —â–æ–± –ø—ñ–∑–Ω—ñ—à–µ –∑—á–∏—Ç–∞—Ç–∏/–∑–∞–∫—Ä–∏—Ç–∏ poll</span></code></pre><p>(–î–æ 12 –æ–ø—Ü—ñ–π —ñ–∑ Bot API 9.1). (<a href="https://core.telegram.org/bots/api-changelog?utm_source=chatgpt.com" title="Bot API changelog">core.telegram.org</a>)</p>
<h1 id="-markdown">
        <a href="#-markdown" class="header-anchor">
          –ü–æ—Ä–∞–¥–∏ –∑ –ø–æ–±—É–¥–æ–≤–∏ —É—Ä–æ–∫—ñ–≤ –Ω–∞ Markdown
        </a>
      </h1><ul>
<li>–¢—Ä–∏–º–∞–π <strong>–∫—Ä–æ–∫–∏</strong> —É—Ä–æ–∫—É –Ω–µ–≤–µ–ª–∏–∫–∏–º–∏: 300‚Äì700 —Å–∏–º–≤–æ–ª—ñ–≤ + –∫–∞—Ä—Ç–∏–Ω–∫–∞/–∞—É–¥—ñ–æ ‚Üí –∫—Ä–∞—â–∞ —É—Ç—Ä–∏–º—É–≤–∞–Ω—ñ—Å—Ç—å.</li>
<li>–î–ª—è —Ç–∞–±–ª–∏—Ü—å ‚Äî –∞–±–æ <strong>pre-–±–ª–æ–∫</strong>, –∞–±–æ <strong>PDF/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</strong>, –∞–±–æ <strong>Mini App</strong> –¥–ª—è –∂–∏–≤–∏—Ö —Ç–∞–±–ª–∏—Ü—å. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li><code>callback_data</code> ‚Äî –ª–∏—à–µ –∫–ª—é—á, –≤—Å–µ —ñ–Ω—à–µ –≤ Dragonfly/Postgres (—â–æ–± –Ω–µ –≤–ø–µ—Ä—Ç–∏—Å—å —É 64 –±–∞–π—Ç–∏). (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li>–ö–µ—à—É–π <code>file_id</code> —É –ë–î, —â–æ–± –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –≤–∞–∂–∫–∏–π –º–µ–¥—ñ–∞. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
<li>–í—Ä–∞—Ö–æ–≤—É–π –ª—ñ–º—ñ—Ç–∏ (30 msg/s) —Ç–∞ —Ä–æ–±–∏ —á–µ—Ä–≥–∏/–±–µ–∫-–æ—Ñ. (<a href="https://core.telegram.org/bots/api" title="Telegram Bot API">core.telegram.org</a>)</li>
</ul>
<h1 id="-mini-app-web-app">
        <a href="#-mini-app-web-app" class="header-anchor">
          –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω Mini App (Web App)
        </a>
      </h1><ul>
<li>–°–∫–ª–∞–¥–Ω—ñ —Ñ–æ—Ä–º–∏ (—Ä—ñ–≤–Ω—ñ, —Ç–∞—Ä–∏—Ñ–∏, –æ–ø–ª–∞—Ç–∏, –ø—Ä–æ–≥—Ä–µ—Å-–¥–∞—à–±–æ—Ä–¥–∏), <strong>–∂–∏–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ</strong>, –≤–ø—Ä–∞–≤–∏ –∑ drag-and-drop, —Ç–∞–π–º–µ—Ä–∏ ‚Äî —É—Å–µ —Ü–µ –ª–µ–≥—à–µ –≤ Mini App —ñ –≤–æ–Ω–æ –ø—Ä–∞—Ü—é—î –ø—Ä—è–º–æ –≤ Telegram. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ <code>web_app</code>-–∫–Ω–æ–ø–∫–∏. (<a href="https://core.telegram.org/bots/webapps?utm_source=chatgpt.com" title="Telegram Mini Apps">core.telegram.org</a>)</li>
</ul>
<hr>
<p>–•–æ—á–µ—à ‚Äî –∑–≥–µ–Ω–µ—Ä—É—é —à–∞–±–ª–æ–Ω —Ä—ñ—à–µ–Ω–Ω—è (<code>.NET 9</code> Minimal API —ñ–∑ webhook, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é <code>Telegram.Bot</code>, —Å—Ç—Ä—É–∫—Ç—É—Ä—É <code>Application/Data/Infrastructure</code>, –∫–µ—à Dragonfly, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó Postgres, –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–æ–º–∞–Ω–¥/–∫–≤—ñ–∑—ñ–≤, –º—ñ–≥—Ä–∞—Ü—ñ—ó) —ñ –º–µ—Ä–µ–∂—É docker-compose –ø—ñ–¥ –ª–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ä—Ç.</p>

        </div>
      
      </div>
    </main>
  </div>

  <!-- External JavaScript -->
  <script src="/second-brain/app.js"></script>
</body>
</html>
