
<!DOCTYPE html>
<html lang="en">
<head>
  <meta version="1.0.1">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>markdig-101 - Documentation Portal</title>
  
  <!-- External Stylesheet -->
  <link rel="stylesheet" type="text/css" href="/second-brain/app.css">
  
  <!-- Highlight.js CSS for syntax highlighting -->
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">

  <!-- KaTeX for LaTeX math rendering -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

  <!-- Mermaid for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
  
  <!-- Initialize KaTeX auto-render -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      renderMathInElement(document.body, {
        delimiters: [
          {left: '$$', right: '$$', display: true},
          {left: '$', right: '$', display: false}
        ],
        throwOnError: false
      });
    });
  </script>
  
</head>
<body data-base-url="/second-brain">
  <!-- Mobile Menu Toggle Button -->
  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
  </button>
  
  <!-- Mobile Overlay -->
  <div class="mobile-overlay"></div>
  
  <!-- Image Lightbox -->
  <div id="image-lightbox" class="lightbox" style="display: none;">
    <div class="lightbox-overlay"></div>
    <div class="lightbox-content">
      <button class="lightbox-close" aria-label="Close lightbox">&times;</button>
      <button class="lightbox-prev" aria-label="Previous image">&#8249;</button>
      <button class="lightbox-next" aria-label="Next image">&#8250;</button>
      <img class="lightbox-image" src="" alt="" />
      <div class="lightbox-caption"></div>
      <div class="lightbox-counter"></div>
    </div>
  </div>
  
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2><a href="/second-brain/">üìö Docs Portal</a></h2>
      </div>
      
      
      <!-- Commit Info Banner -->
      <div class="commit-info-banner">
        <div class="commit-icon">üîÑ</div>
        <div class="commit-details">
          <div class="commit-message" title="events service migration guide">
            events service migration guide
          </div>
          <div class="commit-meta">
            <span class="commit-hash">e70d352</span>
            <span class="commit-date">16 seconds ago</span>
          </div>
        </div>
      </div>
      
      
      <!-- Sidebar controls for collapse/expand all -->
      <div class="sidebar-controls">
        <button onclick="collapseAll()" title="Collapse all folders">
          ‚¨ÜÔ∏è Collapse All
        </button>
        <button onclick="expandAll()" title="Expand all folders">
          ‚¨áÔ∏è Expand All
        </button>
      </div>
      
      <nav class="navigation" id="nav-container">
        
        <!-- Navigation will be loaded from navigation.json -->
        <div class="nav-loading">
          <div class="nav-loading-spinner"></div>
          <p>Loading navigation...</p>
        </div>
        
      </nav>
    </aside>
    
    <main class="main-content">
      <div class="content">
        
        <nav class="breadcrumb"><ol><li><a href="/second-brain/">üè† Home</a></li><li><a href="/second-brain/1-projects/">1-projects</a></li><li><a href="/second-brain/1-projects/english-learning-bot/">english-learning-bot</a></li></ol></nav>
        <div class="markdown-content">
          <div class="table-of-contents">
<ul>
<li><a href="#-markdown-markdig-net">–†–æ–±–æ—Ç–∞ –∑ Markdown —á–µ—Ä–µ–∑ Markdig –≤ .NET</a></li>
<ul>
<li><a href="#-">–ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è</a></li>
<li><a href="#-">–ü—Ä–∏–∫–ª–∞–¥ –±–∞–∑–æ–≤–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</a></li>
<li><a href="#-">–°–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –ø–æ —Ä–æ–∑–¥—ñ–ª–∞—Ö</a></li>
<li><a href="#-">–û–±—Ä–æ–±–∫–∞ –º–µ–¥—ñ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É</a></li>
<ul>
<li><a href="#-">–í—ñ–¥–µ–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</a></li>
<li><a href="#-">–û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å</a></li>
</ul>
<li><a href="#-">–ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è</a></li>
<li><a href="#-">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —Ç–∞ –Ω–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏</a></li>
<li><a href="#-telegram-">–°–ø–µ—Ü–∏—Ñ—ñ–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è Telegram –±–æ—Ç–∞</a></li>
<ul>
<li><a href="#-markdown-telegram">–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è Markdown –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è Telegram</a></li>
<li><a href="#-">–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –±–æ—Ç—ñ</a></li>
<li><a href="#-telegram">–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è Telegram</a></li>
</ul>
<li><a href="#-markdig">–ö–æ—Ä–∏—Å–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è Markdig</a></li>
</ul>
</ul>
</div><h1 id="-markdown-markdig-net">
        <a href="#-markdown-markdig-net" class="header-anchor">
          –†–æ–±–æ—Ç–∞ –∑ Markdown —á–µ—Ä–µ–∑ Markdig –≤ .NET
        </a>
      </h1><h2 id="-">
        <a href="#-" class="header-anchor">
          –ë–∞–∑–æ–≤–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
        </a>
      </h2><p>–°–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–∞–∫–µ—Ç Markdig —á–µ—Ä–µ–∑ NuGet:</p>
<pre><code class="hljs language-bash">dotnet add package Markdig</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          –ü—Ä–∏–∫–ª–∞–¥ –±–∞–∑–æ–≤–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">using</span> Markdig;
<span class="hljs-keyword">using</span> Markdig.Syntax;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MarkdownProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MarkdownProcessor</span>()</span>
    {
        <span class="hljs-comment">// –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞–π–ø–ª–∞–π–Ω—É –∑ —É—Å—ñ–º–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º–∏</span>
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .UseBootstrap() <span class="hljs-comment">// –î–ª—è Bootstrap –∫–ª–∞—Å—ñ–≤</span>
            .UseEmojiAndSmiley() <span class="hljs-comment">// –î–ª—è –µ–º–æ–¥–∑—ñ</span>
            .UseMediaLinks() <span class="hljs-comment">// –î–ª—è –≤—ñ–¥–µ–æ –ø–æ—Å–∏–ª–∞–Ω—å</span>
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">RenderHtml</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">return</span> Markdown.ToHtml(markdown, _pipeline);
    }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          –°–µ–≥–º–µ–Ω—Ç–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –ø–æ —Ä–æ–∑–¥—ñ–ª–∞—Ö
        </a>
      </h2><p>–î–ª—è —Ä–æ–∑–±–∏—Ç—Ç—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –Ω–∞ —Ä–æ–∑–¥—ñ–ª–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤:</p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ContentSegmenter</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ContentSegmenter</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;ContentSection&gt; <span class="hljs-title">SegmentByHeadings</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        <span class="hljs-keyword">var</span> sections = <span class="hljs-keyword">new</span> List&lt;ContentSection&gt;();
        <span class="hljs-keyword">var</span> currentSection = <span class="hljs-keyword">new</span> ContentSection();
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> block <span class="hljs-keyword">in</span> document)
        {
            <span class="hljs-keyword">if</span> (block <span class="hljs-keyword">is</span> HeadingBlock heading)
            {
                <span class="hljs-comment">// –Ø–∫—â–æ –∑–Ω–∞–π—à–ª–∏ –Ω–æ–≤–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—é —Å–µ–∫—Ü—ñ—é</span>
                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(currentSection.Title))
                {
                    sections.Add(currentSection);
                    currentSection = <span class="hljs-keyword">new</span> ContentSection();
                }
                
                currentSection.Title = heading.Inline?.FirstChild?.ToString();
                currentSection.Level = heading.Level;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Å–µ–∫—Ü—ñ—ó</span>
                currentSection.Content.Add(block);
            }
        }
        
        <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –æ—Å—Ç–∞–Ω–Ω—é —Å–µ–∫—Ü—ñ—é</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(currentSection.Title))
        {
            sections.Add(currentSection);
        }
        
        <span class="hljs-keyword">return</span> sections;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ContentSection</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Level { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Block&gt; Content { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          –û–±—Ä–æ–±–∫–∞ –º–µ–¥—ñ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç—É
        </a>
      </h2><h3 id="-">
        <a href="#-" class="header-anchor">
          –í—ñ–¥–µ–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MediaProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MediaProcessor</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseMediaLinks() <span class="hljs-comment">// –ê–∫—Ç–∏–≤—É—î–º–æ –ø—ñ–¥—Ç—Ä–∏–º–∫—É –º–µ–¥—ñ–∞ –ø–æ—Å–∏–ª–∞–Ω—å</span>
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ProcessVideoLinks</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-comment">// –ö–∞—Å—Ç–æ–º–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –≤—ñ–¥–µ–æ –ø–æ—Å–∏–ª–∞–Ω—å</span>
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> link <span class="hljs-keyword">in</span> document.Descendants&lt;LinkInline&gt;())
        {
            <span class="hljs-keyword">if</span> (IsVideoUrl(link.Url))
            {
                <span class="hljs-comment">// –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è —É –≤–±—É–¥–æ–≤–∞–Ω–∏–π –ø–ª–µ—î—Ä</span>
                <span class="hljs-keyword">var</span> videoEmbed = GenerateVideoEmbed(link.Url);
                <span class="hljs-comment">// –ó–∞–º—ñ–Ω—è—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤–±—É–¥–æ–≤–∞–Ω–∏–π –∫–æ–¥</span>
                link.Url = videoEmbed;
            }
        }

        <span class="hljs-keyword">return</span> Markdown.ToHtml(document, _pipeline);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsVideoUrl</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span>
    {
        <span class="hljs-keyword">return</span> url?.Contains(<span class="hljs-string">&quot;youtube.com&quot;</span>) == <span class="hljs-literal">true</span> || 
               url?.Contains(<span class="hljs-string">&quot;vimeo.com&quot;</span>) == <span class="hljs-literal">true</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GenerateVideoEmbed</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span>
    {
        <span class="hljs-comment">// –ü—Ä–∏–∫–ª–∞–¥ –¥–ª—è YouTube</span>
        <span class="hljs-keyword">if</span> (url.Contains(<span class="hljs-string">&quot;youtube.com&quot;</span>))
        {
            <span class="hljs-keyword">var</span> videoId = ExtractYouTubeId(url);
            <span class="hljs-keyword">return</span> <span class="hljs-string">$@&quot;&lt;div class=&quot;&quot;video-container&quot;&quot;&gt;
                       &lt;iframe width=&quot;&quot;560&quot;&quot; height=&quot;&quot;315&quot;&quot; 
                               src=&quot;&quot;https://www.youtube.com/embed/<span class="hljs-subst">{videoId}</span>&quot;&quot; 
                               frameborder=&quot;&quot;0&quot;&quot; allowfullscreen&gt;
                       &lt;/iframe&gt;
                     &lt;/div&gt;&quot;</span>;
        }
        <span class="hljs-keyword">return</span> url;
    }
}</code></pre><h3 id="-">
        <a href="#-" class="header-anchor">
          –û–±—Ä–æ–±–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω—å
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ImageProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ImageProcessor</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ProcessImages</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> image <span class="hljs-keyword">in</span> document.Descendants&lt;LinkInline&gt;().Where(x =&gt; x.IsImage))
        {
            <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ –¥–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</span>
            image.GetAttributes().AddClass(<span class="hljs-string">&quot;img-fluid&quot;</span>);
            
            <span class="hljs-comment">// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —à–ª—è—Ö –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</span>
            <span class="hljs-keyword">if</span> (!image.Url.StartsWith(<span class="hljs-string">&quot;http&quot;</span>))
            {
                <span class="hljs-comment">// –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –≤—ñ–¥–Ω–æ—Å–Ω–∏–π —à–ª—è—Ö –≤ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π</span>
                image.Url = ConvertToAbsolutePath(image.Url);
            }
            
            <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</span>
            image.GetAttributes().AddProperty(<span class="hljs-string">&quot;onerror&quot;</span>, <span class="hljs-string">&quot;this.onerror=null;this.src=&#x27;placeholder.png&#x27;;&quot;</span>);
        }

        <span class="hljs-keyword">return</span> Markdown.ToHtml(document, _pipeline);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ConvertToAbsolutePath</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> relativePath</span>)</span>
    {
        <span class="hljs-comment">// –õ–æ–≥—ñ–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –≤—ñ–¥–Ω–æ—Å–Ω–æ–≥–æ —à–ª—è—Ö—É –≤ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π</span>
        <span class="hljs-keyword">var</span> baseUrl = <span class="hljs-string">&quot;https://your-domain.com/images/&quot;</span>;
        <span class="hljs-keyword">return</span> Path.Combine(baseUrl, relativePath).Replace(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);
    }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          –ü–æ–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MarkdownDocumentProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ContentSegmenter _segmenter;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MediaProcessor _mediaProcessor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ImageProcessor _imageProcessor;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MarkdownDocumentProcessor</span>()</span>
    {
        _segmenter = <span class="hljs-keyword">new</span> ContentSegmenter();
        _mediaProcessor = <span class="hljs-keyword">new</span> MediaProcessor();
        _imageProcessor = <span class="hljs-keyword">new</span> ImageProcessor();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;ProcessedDocument&gt; <span class="hljs-title">ProcessDocumentAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filePath</span>)</span>
    {
        <span class="hljs-keyword">var</span> markdown = <span class="hljs-keyword">await</span> File.ReadAllTextAsync(filePath);
        
        <span class="hljs-comment">// –†–æ–∑–±–∏–≤–∞—î–º–æ –Ω–∞ —Å–µ–∫—Ü—ñ—ó</span>
        <span class="hljs-keyword">var</span> sections = _segmenter.SegmentByHeadings(markdown);
        
        <span class="hljs-comment">// –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–Ω—É —Å–µ–∫—Ü—ñ—é</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> section <span class="hljs-keyword">in</span> sections)
        {
            <span class="hljs-keyword">var</span> sectionContent = <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot;\n&quot;</span>, section.Content);
            
            <span class="hljs-comment">// –û–±—Ä–æ–±–ª—è—î–º–æ –º–µ–¥—ñ–∞</span>
            sectionContent = _mediaProcessor.ProcessVideoLinks(sectionContent);
            
            <span class="hljs-comment">// –û–±—Ä–æ–±–ª—è—î–º–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</span>
            sectionContent = _imageProcessor.ProcessImages(sectionContent);
            
            section.ProcessedContent = sectionContent;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ProcessedDocument
        {
            Title = sections.FirstOrDefault()?.Title ?? Path.GetFileNameWithoutExtension(filePath),
            Sections = sections
        };
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProcessedDocument</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;ContentSection&gt; Sections { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; Metadata { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —Ç–∞ –Ω–∞–π–∫—Ä–∞—â—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏
        </a>
      </h2><ol>
<li><p><strong>–ö–µ—à—É–≤–∞–Ω–Ω—è</strong>:</p>
<ul>
<li>–ö–µ—à—É–π—Ç–µ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏–π HTML –¥–ª—è —á–∞—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤</li>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è –¥–ª—è —ñ–Ω–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –∫–µ—à—É</li>
</ul>
</li>
<li><p><strong>–ë–µ–∑–ø–µ–∫–∞</strong>:</p>
<ul>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ <code>UseAdvancedExtensions().DisableHtml()</code> –¥–ª—è –∑–∞–±–æ—Ä–æ–Ω–∏ HTML</li>
<li>–í–∞–ª—ñ–¥—É–π—Ç–µ –≤—Å—ñ –∑–æ–≤–Ω—ñ—à–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è</li>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±—ñ–ª–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –¥–æ–º–µ–Ω—ñ–≤ –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å</li>
</ul>
</li>
<li><p><strong>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</strong>:</p>
<ul>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤</li>
<li>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –ª—ñ–Ω–∏–≤–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤</li>
<li>–û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º</li>
</ul>
</li>
<li><p><strong>–ü—ñ–¥—Ç—Ä–∏–º–∫–∞</strong>:</p>
<ul>
<li>–í–µ–¥—ñ—Ç—å –ª–æ–≥ –ø–æ–º–∏–ª–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥—É</li>
<li>–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –º–µ—Ö–∞–Ω—ñ–∑–º –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –ø–æ–º–∏–ª–∫–∞—Ö</li>
<li>–î–æ–¥–∞–π—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞</li>
</ul>
</li>
</ol>
<h2 id="-telegram-">
        <a href="#-telegram-" class="header-anchor">
          –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è Telegram –±–æ—Ç–∞
        </a>
      </h2><h3 id="-markdown-telegram">
        <a href="#-markdown-telegram" class="header-anchor">
          –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è Markdown –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è Telegram
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TelegramMarkdownProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> _mediaBasePath;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TelegramMarkdownProcessor</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mediaBasePath</span>)</span>
    {
        _mediaBasePath = mediaBasePath;
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .DisableHtml() <span class="hljs-comment">// –î–ª—è –±–µ–∑–ø–µ–∫–∏</span>
            .UseEmphasisExtras() <span class="hljs-comment">// –î–ª—è –¥–æ–¥–∞—Ç–∫–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è</span>
            .UseEmojiAndSmiley()
            .Build();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;List&lt;BotMessage&gt;&gt; ProcessMarkdownForTelegramAsync(<span class="hljs-built_in">string</span> markdown)
    {
        <span class="hljs-keyword">var</span> messages = <span class="hljs-keyword">new</span> List&lt;BotMessage&gt;();
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        <span class="hljs-keyword">var</span> currentTextBlock = <span class="hljs-keyword">new</span> StringBuilder();
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> block <span class="hljs-keyword">in</span> document)
        {
            <span class="hljs-keyword">switch</span> (block)
            {
                <span class="hljs-keyword">case</span> HeadingBlock heading:
                    <span class="hljs-comment">// –Ø–∫—â–æ —î –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏–π —Ç–µ–∫—Å—Ç, –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }
                    
                    <span class="hljs-comment">// –§–æ—Ä–º–∞—Ç—É—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span>
                    <span class="hljs-keyword">var</span> headingText = <span class="hljs-string">$&quot;*<span class="hljs-subst">{EscapeMarkdown(heading.Inline?.FirstChild?.ToString())}</span>*\n\n&quot;</span>;
                    currentTextBlock.Append(headingText);
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> ParagraphBlock paragraph:
                    <span class="hljs-keyword">var</span> text = paragraph.Inline?.FirstChild?.ToString();
                    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(text))
                    {
                        currentTextBlock.Append(EscapeMarkdown(text)).Append(<span class="hljs-string">&quot;\n\n&quot;</span>);
                    }
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> LinkInline link <span class="hljs-keyword">when</span> link.IsImage:
                    <span class="hljs-comment">// –Ø–∫—â–æ —î –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏–π —Ç–µ–∫—Å—Ç, –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }

                    <span class="hljs-comment">// –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º</span>
                    <span class="hljs-keyword">var</span> imagePath = Path.Combine(_mediaBasePath, link.Url);
                    messages.Add(<span class="hljs-keyword">new</span> PhotoMessage(link.Title ?? <span class="hljs-string">&quot;&quot;</span>, imagePath));
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> FencedCodeBlock codeBlock:
                    <span class="hljs-comment">// –Ø–∫—â–æ —î –Ω–∞–∫–æ–ø–∏—á–µ–Ω–∏–π —Ç–µ–∫—Å—Ç, –¥–æ–¥–∞—î–º–æ –π–æ–≥–æ —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }

                    <span class="hljs-comment">// –§–æ—Ä–º–∞—Ç—É—î–º–æ –∫–æ–¥ –¥–ª—è Telegram</span>
                    <span class="hljs-keyword">var</span> code = <span class="hljs-string">$&quot;```<span class="hljs-subst">{codeBlock.Info}</span>\n<span class="hljs-subst">{codeBlock.Lines}</span>\n```&quot;</span>;
                    messages.Add(<span class="hljs-keyword">new</span> TextMessage(code, ParseMode.MarkdownV2));
                    <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-comment">// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä–æ–∑–º—ñ—Ä –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫—É</span>
            <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">3500</span>) <span class="hljs-comment">// Telegram –ª—ñ–º—ñ—Ç ~4096</span>
            {
                messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                currentTextBlock.Clear();
            }
        }

        <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –∑–∞–ª–∏—à–∫–æ–≤–∏–π —Ç–µ–∫—Å—Ç</span>
        <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
        {
            messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
        }

        <span class="hljs-keyword">return</span> messages;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">EscapeMarkdown</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>? text</span>)</span>
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(text)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.Empty;
        
        <span class="hljs-comment">// –ï–∫—Ä–∞–Ω—É—î–º–æ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å–∏–º–≤–æ–ª–∏ –¥–ª—è MarkdownV2</span>
        <span class="hljs-keyword">return</span> text
            .Replace(<span class="hljs-string">&quot;_&quot;</span>, <span class="hljs-string">&quot;\\_&quot;</span>)
            .Replace(<span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-string">&quot;\\*&quot;</span>)
            .Replace(<span class="hljs-string">&quot;[&quot;</span>, <span class="hljs-string">&quot;\\[&quot;</span>)
            .Replace(<span class="hljs-string">&quot;]&quot;</span>, <span class="hljs-string">&quot;\\]&quot;</span>)
            .Replace(<span class="hljs-string">&quot;(&quot;</span>, <span class="hljs-string">&quot;\\(&quot;</span>)
            .Replace(<span class="hljs-string">&quot;)&quot;</span>, <span class="hljs-string">&quot;\\)&quot;</span>)
            .Replace(<span class="hljs-string">&quot;~&quot;</span>, <span class="hljs-string">&quot;\\~&quot;</span>)
            .Replace(<span class="hljs-string">&quot;`&quot;</span>, <span class="hljs-string">&quot;\\`&quot;</span>)
            .Replace(<span class="hljs-string">&quot;&gt;&quot;</span>, <span class="hljs-string">&quot;\\&gt;&quot;</span>)
            .Replace(<span class="hljs-string">&quot;#&quot;</span>, <span class="hljs-string">&quot;\\#&quot;</span>)
            .Replace(<span class="hljs-string">&quot;+&quot;</span>, <span class="hljs-string">&quot;\\+&quot;</span>)
            .Replace(<span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-string">&quot;\\-&quot;</span>)
            .Replace(<span class="hljs-string">&quot;=&quot;</span>, <span class="hljs-string">&quot;\\=&quot;</span>)
            .Replace(<span class="hljs-string">&quot;|&quot;</span>, <span class="hljs-string">&quot;\\|&quot;</span>)
            .Replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;\\.&quot;</span>)
            .Replace(<span class="hljs-string">&quot;!&quot;</span>, <span class="hljs-string">&quot;\\!&quot;</span>);
    }
}

<span class="hljs-comment">// –ú–æ–¥–µ–ª—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">record</span> <span class="hljs-title">BotMessage</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">TextMessage</span>(<span class="hljs-params">
    <span class="hljs-built_in">string</span> Text,
    ParseMode ParseMode = ParseMode.MarkdownV2
</span>) : BotMessage</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">PhotoMessage</span>(<span class="hljs-params">
    <span class="hljs-built_in">string</span> Caption,
    <span class="hljs-built_in">string</span> PhotoPath,
    ParseMode ParseMode = ParseMode.MarkdownV2
</span>) : BotMessage</span>;

<span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> ParseMode
{
    MarkdownV2,
    HTML,
    Markdown
}</code></pre><h3 id="-">
        <a href="#-" class="header-anchor">
          –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –±–æ—Ç—ñ
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LessonHandler</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> TelegramMarkdownProcessor _markdownProcessor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ITelegramBotClient _botClient;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LessonHandler</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mediaBasePath, ITelegramBotClient botClient</span>)</span>
    {
        _markdownProcessor = <span class="hljs-keyword">new</span> TelegramMarkdownProcessor(mediaBasePath);
        _botClient = botClient;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SendLessonAsync</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> chatId, <span class="hljs-built_in">string</span> lessonContent</span>)</span>
    {
        <span class="hljs-comment">// –û–±—Ä–æ–±–ª—è—î–º–æ markdown –∫–æ–Ω—Ç–µ–Ω—Ç</span>
        <span class="hljs-keyword">var</span> messages = <span class="hljs-keyword">await</span> _markdownProcessor.ProcessMarkdownForTelegramAsync(lessonContent);
        
        <span class="hljs-comment">// –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> message <span class="hljs-keyword">in</span> messages)
        {
            <span class="hljs-keyword">switch</span> (message)
            {
                <span class="hljs-keyword">case</span> TextMessage textMessage:
                    <span class="hljs-keyword">await</span> _botClient.SendTextMessageAsync(
                        chatId: chatId,
                        text: textMessage.Text,
                        parseMode: textMessage.ParseMode);
                    <span class="hljs-keyword">break</span>;
                    
                <span class="hljs-keyword">case</span> PhotoMessage photoMessage:
                    <span class="hljs-keyword">await</span> <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> photoStream = File.OpenRead(photoMessage.PhotoPath);
                    <span class="hljs-keyword">await</span> _botClient.SendPhotoAsync(
                        chatId: chatId,
                        photo: InputFile.FromStream(photoStream),
                        caption: photoMessage.Caption,
                        parseMode: photoMessage.ParseMode);
                    <span class="hljs-keyword">break</span>;
            }
            
            <span class="hljs-comment">// –î–æ–¥–∞—î–º–æ –∑–∞—Ç—Ä–∏–º–∫—É –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏</span>
            <span class="hljs-keyword">await</span> Task.Delay(TimeSpan.FromMilliseconds(<span class="hljs-number">100</span>));
        }
    }
}</code></pre><h3 id="-telegram">
        <a href="#-telegram" class="header-anchor">
          –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–ª—è Telegram
        </a>
      </h3><ol>
<li><p><strong>–†–æ–∑–º—ñ—Ä –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å</strong>:</p>
<ul>
<li>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: 4096 —Å–∏–º–≤–æ–ª—ñ–≤</li>
<li>–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Ä–æ–∑–±–∏–≤–∞—Ç–∏ –≤–µ–ª–∏–∫—ñ —Ç–µ–∫—Å—Ç–∏ –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏</li>
</ul>
</li>
<li><p><strong>–§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è</strong>:</p>
<ul>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ MarkdownV2 –¥–ª—è –∫—Ä–∞—â–æ—ó —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ</li>
<li>–û–±–æ–≤&#39;—è–∑–∫–æ–≤–æ –µ–∫—Ä–∞–Ω—É–π—Ç–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å–∏–º–≤–æ–ª–∏</li>
<li>–ü—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è: <code>*bold*, _italic_, __underline__, ~strike~, ||spoiler||, </code>code<code>, ```pre```, [text](URL)</code></li>
</ul>
</li>
<li><p><strong>–ú–µ–¥—ñ–∞ –∫–æ–Ω—Ç–µ–Ω—Ç</strong>:</p>
<ul>
<li>–§–æ—Ç–æ: –º–∞–∫—Å–∏–º—É–º 10 –ú–ë</li>
<li>–í—ñ–¥–µ–æ: –º–∞–∫—Å–∏–º—É–º 50 –ú–ë</li>
<li>–ê—É–¥—ñ–æ: –º–∞–∫—Å–∏–º—É–º 50 –ú–ë</li>
<li>–§–∞–π–ª–∏: –º–∞–∫—Å–∏–º—É–º 50 –ú–ë</li>
</ul>
</li>
<li><p><strong>–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è</strong>:</p>
<ul>
<li>–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Media Groups –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –¥–µ–∫—ñ–ª—å–∫–æ—Ö —Ñ–æ—Ç–æ</li>
<li>–ö–µ—à—É–π—Ç–µ file_id –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–µ–¥—ñ–∞</li>
<li>–û–ø—Ç–∏–º—ñ–∑—É–π—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –≤—ñ–¥–ø—Ä–∞–≤–∫–æ—é</li>
</ul>
</li>
</ol>
<h2 id="-markdig">
        <a href="#-markdig" class="header-anchor">
          –ö–æ—Ä–∏—Å–Ω—ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è Markdig
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">var</span> pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
    .UseAdvancedExtensions()
    .DisableHtml() <span class="hljs-comment">// –î–ª—è –±–µ–∑–ø–µ–∫–∏ –≤ Telegram</span>
    .UseEmojiAndSmiley()
    .UseEmphasisExtras()
    .UseAutoLinks()
    .UseTaskLists()
    .UseCustomContainers()
    .UsePipeTables()
    .Build();</code></pre>
        </div>
      
      </div>
    </main>
  </div>

  <!-- External JavaScript -->
  <script src="/second-brain/app.js"></script>
</body>
</html>
