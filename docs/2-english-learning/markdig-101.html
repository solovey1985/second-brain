<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>markdig-101 - Documentation Portal</title>
  
  <!-- Embedded Styles -->
  <style>
  /* Print Styles - Hide navigation and optimize for printing */
  @media print {
    .sidebar {
      display: none !important;
    }
    
    .main-content {
      margin-left: 0 !important;
      padding: 0 !important;
      max-width: 100% !important;
    }
    
    .content {
      width: 100% !important;
      max-width: 100% !important;
      margin: 0 !important;
      padding: 1rem !important;
      box-shadow: none !important;
      border-radius: 0 !important;
      background: #fff !important;
      min-height: auto !important;
    }
    
    .breadcrumb {
      display: none !important;
    }
    
    body {
      background: #fff !important;
      color: #000 !important;
      font-size: 12pt !important;
      line-height: 1.4 !important;
    }
    
    .app-container {
      display: block !important;
    }
    
    /* Optimize typography for print */
    h1, h2, h3, h4, h5, h6 {
      color: #000 !important;
      page-break-after: avoid !important;
    }
    
    .markdown-content h1 {
      font-size: 18pt !important;
      margin-top: 0 !important;
    }
    
    .markdown-content h2 {
      font-size: 16pt !important;
    }
    
    .markdown-content h3 {
      font-size: 14pt !important;
    }
    
    .markdown-content p, .markdown-content li {
      font-size: 11pt !important;
      line-height: 1.4 !important;
    }
    
    /* Ensure proper page breaks */
    .directory-listing .entry {
      page-break-inside: avoid !important;
      break-inside: avoid !important;
    }
    
    /* Hide interactive elements that don't work in print */
    .entry:hover {
      transform: none !important;
      box-shadow: none !important;
    }
    
    /* Ensure links show URLs in print */
    .markdown-content a:after {
      content: " (" attr(href) ")";
      font-size: 10pt;
      color: #666;
    }
    
    /* Hide emojis/icons that might not print well */
    .icon {
      font-size: 0 !important;
    }
    
    .icon:before {
      content: "• ";
      font-size: 11pt !important;
    }
  }
    /* Modern Documentation Portal Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      background: #fafbfc;
      color: #24292f;
      line-height: 1.6;
    }

    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar Navigation */
    .sidebar {
      width: 280px;
      background: #fff;
      border-right: 1px solid #e1e4e8;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: fixed;
      height: 100vh;
      overflow-y: auto;
      z-index: 1000;
    }

    .sidebar-header {
      padding: 1.5rem;
      border-bottom: 1px solid #e1e4e8;
    }

    .sidebar-header h2 a {
      text-decoration: none;
      color: #0366d6;
      font-size: 1.4rem;
      font-weight: 600;
    }

    .navigation {
      padding: 1rem 0;
    }

    .navigation ul {
      list-style: none;
      padding: 0;
    }

    .navigation li {
      margin: 0;
    }

    .navigation a {
      display: block;
      padding: 0.5rem 1.5rem;
      text-decoration: none;
      color: #586069;
      transition: all 0.2s ease;
      font-size: 0.9rem;
    }

    .navigation a:hover {
      background: #f6f8fa;
      color: #0366d6;
    }

    .nav-level-1 a {
      padding-left: 2rem;
      font-size: 0.85rem;
    }

    .nav-level-2 a {
      padding-left: 2.5rem;
      font-size: 0.8rem;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 280px;
      padding: 2rem;
      max-width: calc(100vw - 280px);
    }

    .content {
      width: 90%;
      max-width: 96%;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 2rem;
      min-height: 80vh;
    }

    /* Breadcrumb */
    .breadcrumb {
      margin-bottom: 1.5rem;
    }

    .breadcrumb ol {
      list-style: none;
      display: flex;
      align-items: center;
      font-size: 0.9rem;
    }

    .breadcrumb li {
      margin-right: 0.5rem;
    }

    .breadcrumb li:not(:last-child)::after {
      content: '›';
      margin-left: 0.5rem;
      color: #586069;
    }

    .breadcrumb a {
      color: #0366d6;
      text-decoration: none;
    }

    .breadcrumb a:hover {
      text-decoration: underline;
    }

    /* Directory Listing */
    .directory-listing {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .entry {
      border: 1px solid #e1e4e8;
      border-radius: 6px;
      transition: all 0.2s ease;
    }

    .entry:hover {
      border-color: #0366d6;
      box-shadow: 0 2px 8px rgba(3, 102, 214, 0.15);
      transform: translateY(-1px);
    }

    .entry a {
      display: flex;
      align-items: center;
      padding: 1rem;
      text-decoration: none;
      color: #24292f;
    }

    .entry .icon {
      font-size: 1.5rem;
      margin-right: 0.75rem;
    }

    .entry .name {
      font-weight: 500;
    }

    .entry-directory {
      background: #f6f8fa;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      color: #24292f;
      margin-bottom: 1rem;
      line-height: 1.25;
    }

    h1 {
      font-size: 2rem;
      font-weight: 600;
      border-bottom: 1px solid #e1e4e8;
      padding-bottom: 0.5rem;
    }

    /* Markdown Content Styles */
    .markdown-content {
      line-height: 1.6;
      color: #24292f;
    }

    .markdown-content h1,
    .markdown-content h2,
    .markdown-content h3,
    .markdown-content h4,
    .markdown-content h5,
    .markdown-content h6 {
      margin-top: 24px;
      margin-bottom: 16px;
      font-weight: 600;
      line-height: 1.25;
      color: #1f2328;
    }

    .markdown-content h1 {
      font-size: 2em;
      border-bottom: 1px solid #d0d7de;
      padding-bottom: 0.3em;
    }

    .markdown-content h2 {
      font-size: 1.5em;
      border-bottom: 1px solid #d0d7de;
      padding-bottom: 0.3em;
    }

    .markdown-content h3 {
      font-size: 1.25em;
    }

    .markdown-content h4 {
      font-size: 1em;
    }

    .markdown-content h5 {
      font-size: 0.875em;
    }

    .markdown-content h6 {
      font-size: 0.85em;
      color: #656d76;
    }

    .markdown-content p {
      margin-bottom: 16px;
    }

    .markdown-content a {
      color: #0969da;
      text-decoration: none;
    }

    .markdown-content a:hover {
      text-decoration: underline;
    }

    .markdown-content strong {
      font-weight: 600;
    }

    .markdown-content em {
      font-style: italic;
    }

    .markdown-content code {
      padding: 0.2em 0.4em;
      margin: 0;
      font-size: 85%;
      white-space: break-spaces;
      background-color: #afb8c133;
      border-radius: 6px;
      font-family: ui-monospace, SFMono-Regular, "SF Mono", Consolas, "Liberation Mono", Menlo, monospace;
    }

    .markdown-content pre {
      padding: 16px;
      overflow: auto;
      font-size: 85%;
      line-height: 1.45;
      color: #1f2328;
      background-color: #f6f8fa;
      border-radius: 6px;
      margin-bottom: 16px;
    }

    .markdown-content pre code {
      display: inline;
      max-width: auto;
      padding: 0;
      margin: 0;
      overflow: visible;
      line-height: inherit;
      word-wrap: normal;
      background-color: transparent;
      border: 0;
    }

    .markdown-content blockquote {
      padding: 0 1em;
      color: #656d76;
      border-left: 0.25em solid #d0d7de;
      margin-bottom: 16px;
    }

    .markdown-content blockquote > :first-child {
      margin-top: 0;
    }

    .markdown-content blockquote > :last-child {
      margin-bottom: 0;
    }

    .markdown-content ul,
    .markdown-content ol {
      margin-bottom: 16px;
      padding-left: 2em;
    }

    .markdown-content ul ul,
    .markdown-content ul ol,
    .markdown-content ol ol,
    .markdown-content ol ul {
      margin-top: 0;
      margin-bottom: 0;
    }

    .markdown-content li {
      word-wrap: break-all;
    }

    .markdown-content li > p {
      margin-top: 16px;
    }

    .markdown-content li + li {
      margin-top: 0.25em;
    }

    .markdown-content dl {
      padding: 0;
    }

    .markdown-content dl dt {
      padding: 0;
      margin-top: 16px;
      font-size: 1em;
      font-style: italic;
      font-weight: 600;
    }

    .markdown-content dl dd {
      padding: 0 16px;
      margin-bottom: 16px;
    }

    .markdown-content table {
      border-spacing: 0;
      border-collapse: collapse;
      display: block;
      width: max-content;
      max-width: 100%;
      overflow: auto;
      margin-bottom: 16px;
    }

    .markdown-content table tr {
      background-color: #ffffff;
      border-top: 1px solid #d0d7de;
    }

    .markdown-content table tr:nth-child(2n) {
      background-color: #f6f8fa;
    }

    .markdown-content table th,
    .markdown-content table td {
      padding: 6px 13px;
      border: 1px solid #d0d7de;
    }

    .markdown-content table th {
      font-weight: 600;
      background-color: #f6f8fa;
    }

    .markdown-content img {
      max-width: 100%;
      height: auto;
      box-sizing: content-box;
    }

    .markdown-content hr {
      height: 0.25em;
      padding: 0;
      margin: 24px 0;
      background-color: #d0d7de;
      border: 0;
    }

    .markdown-content input[type="checkbox"] {
      margin: 0 0.2em 0.25em -1.4em;
      vertical-align: middle;
    }

    .mermaid {
      text-align: center;
      margin: 2rem 0;
    }

    .katex {
      font-size: 1.1em;
    }

    .katex-display {
      margin: 1rem 0;
      text-align: center;
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .sidebar {
        width: 240px;
      }
      
      .main-content {
        margin-left: 240px;
      }
    }

    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main-content {
        margin-left: 0;
        padding: 1rem;
      }
      
      .directory-listing {
        grid-template-columns: 1fr;
      }
    }
  </style>
  
  <!-- Highlight.js CSS for syntax highlighting -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  
  <!-- Mermaid for diagrams -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'default' });
  </script>
  
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header">
        <h2><a href="/">📚 Docs Portal</a></h2>
      </div>
      <nav class="navigation">
        <ul class="nav-level-0">
  <li class="nav-directory">
    <a href="/1-yapidoo/">📁 1-yapidoo</a>
  <ul class="nav-level-1">
    <li class="nav-directory">
      <a href="/1-yapidoo/services/">📁 services</a>
    <ul class="nav-level-2">
      <li class="nav-directory">
        <a href="/1-yapidoo/services/auth/">📁 auth</a>
      </li>
      <li class="nav-file">
        <a href="/1-yapidoo/services/index.html">📄 Index</a>
      </li>
    </ul>
    </li>
    <li class="nav-directory">
      <a href="/1-yapidoo/web/">📁 web</a>
    <ul class="nav-level-2">
      <li class="nav-file">
        <a href="/1-yapidoo/web/index.html">📄 Index</a>
      </li>
      <li class="nav-file">
        <a href="/1-yapidoo/web/spa.html">📄 Spa</a>
      </li>
    </ul>
    </li>
    <li class="nav-file">
      <a href="/1-yapidoo/index.html">📄 Index</a>
    </li>
    <li class="nav-file">
      <a href="/1-yapidoo/README.html">📄 README</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/2-english-learning/">📁 2-english-learning</a>
  <ul class="nav-level-1">
    <li class="nav-file">
      <a href="/2-english-learning/copilot-instructions-telegram-bot.html">📄 Copilot Instructions Telegram Bot</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/final-implementation-guide.html">📄 Final Implementation Guide</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/markdig-101.html">📄 Markdig 101</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/scene-navigation.html">📄 Scene Navigation</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/starter.html">📄 Starter</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/telegram-bot-capabilities.html">📄 Telegram Bot Capabilities</a>
    </li>
    <li class="nav-file">
      <a href="/2-english-learning/whatsup-integration.html">📄 Whatsup Integration</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/пасіка/">📁 пасіка</a>
  <ul class="nav-level-1">
    <li class="nav-directory">
      <a href="/пасіка/додаток/">📁 додаток</a>
    <ul class="nav-level-2">
      <li class="nav-file">
        <a href="/пасіка/додаток/техзадання.html">📄 техзадання</a>
      </li>
    </ul>
    </li>
    <li class="nav-directory">
      <a href="/пасіка/assets/">📁 assets</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/бджолопакет.html">📄 бджолопакет</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/відводки.html">📄 відводки</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/догляд-роями.html">📄 догляд роями</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/підготовка-зими.html">📄 підготовка зими</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/розвиток.html">📄 розвиток</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/розширення.html">📄 розширення</a>
    </li>
    <li class="nav-file">
      <a href="/пасіка/рої.html">📄 рої</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/плитка/">📁 плитка</a>
  <ul class="nav-level-1">
    <li class="nav-file">
      <a href="/плитка/Заливки плитки.html">📄 Заливки плитки</a>
    </li>
    <li class="nav-file">
      <a href="/плитка/рекомендації.html">📄 рекомендації</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/bullet-journal/">📁 bullet-journal</a>
  </li>
  <li class="nav-directory">
    <a href="/domestic-tasks/">📁 domestic-tasks</a>
  <ul class="nav-level-1">
    <li class="nav-directory">
      <a href="/domestic-tasks/shelfs/">📁 shelfs</a>
    <ul class="nav-level-2">
      <li class="nav-file">
        <a href="/domestic-tasks/shelfs/index.html">📄 Index</a>
      </li>
    </ul>
    </li>
    <li class="nav-file">
      <a href="/domestic-tasks/index.html">📄 Index</a>
    </li>
    <li class="nav-file">
      <a href="/domestic-tasks/todo.html">📄 Todo</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/drones/">📁 drones</a>
  <ul class="nav-level-1">
    <li class="nav-file">
      <a href="/drones/auto-drone.html">📄 Auto Drone</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/furniture/">📁 furniture</a>
  <ul class="nav-level-1">
    <li class="nav-directory">
      <a href="/furniture/молбьерт/">📁 молбьерт</a>
    <ul class="nav-level-2">
      <li class="nav-directory">
        <a href="/furniture/молбьерт/simple/">📁 simple</a>
      </li>
      <li class="nav-file">
        <a href="/furniture/молбьерт/35.html">📄 35</a>
      </li>
    </ul>
    </li>
    <li class="nav-directory">
      <a href="/furniture/tables/">📁 tables</a>
    <ul class="nav-level-2">
      <li class="nav-file">
        <a href="/furniture/tables/furniture.html">📄 Furniture</a>
      </li>
    </ul>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/house/">📁 house</a>
  <ul class="nav-level-1">
    <li class="nav-file">
      <a href="/house/heating.html">📄 Heating</a>
    </li>
    <li class="nav-file">
      <a href="/house/heating-scheme.html">📄 Heating Scheme</a>
    </li>
    <li class="nav-file">
      <a href="/house/index.html">📄 Index</a>
    </li>
    <li class="nav-file">
      <a href="/house/todo.html">📄 Todo</a>
    </li>
  </ul>
  </li>
  <li class="nav-directory">
    <a href="/soland-inventory/">📁 soland-inventory</a>
  <ul class="nav-level-1">
    <li class="nav-file">
      <a href="/soland-inventory/inbox.html">📄 Inbox</a>
    </li>
    <li class="nav-file">
      <a href="/soland-inventory/index.html">📄 Index</a>
    </li>
    <li class="nav-file">
      <a href="/soland-inventory/todo.html">📄 Todo</a>
    </li>
  </ul>
  </li>
  <li class="nav-file">
    <a href="/deploy.html">📄 Deploy</a>
  </li>
  <li class="nav-file">
    <a href="/inbox.html">📄 Inbox</a>
  </li>
  <li class="nav-file">
    <a href="/index.html">📄 Index</a>
  </li>
  <li class="nav-file">
    <a href="/sample-showcase.html">📄 Sample Showcase</a>
  </li>
</ul>

      </nav>
    </aside>
    
    <main class="main-content">
      <div class="content">
        
        <nav class="breadcrumb"><ol><li><a href="/">🏠 Home</a></li><li><a href="//2-english-learning/">2-english-learning</a></li></ol></nav>
        <div class="markdown-content">
          <div class="table-of-contents">
<ul>
<li><a href="#-markdown-markdig-net">Робота з Markdown через Markdig в .NET</a></li>
<ul>
<li><a href="#-">Базова конфігурація</a></li>
<li><a href="#-">Приклад базового використання</a></li>
<li><a href="#-">Сегментація контенту по розділах</a></li>
<li><a href="#-">Обробка медіа контенту</a></li>
<ul>
<li><a href="#-">Відео посилання</a></li>
<li><a href="#-">Обробка зображень</a></li>
</ul>
<li><a href="#-">Повний приклад використання</a></li>
<li><a href="#-">Рекомендації та найкращі практики</a></li>
<li><a href="#-telegram-">Специфіка використання для Telegram бота</a></li>
<ul>
<li><a href="#-markdown-telegram">Конвертація Markdown в повідомлення Telegram</a></li>
<li><a href="#-">Приклад використання в боті</a></li>
<li><a href="#-telegram">Особливості та обмеження для Telegram</a></li>
</ul>
<li><a href="#-markdig">Корисні розширення Markdig</a></li>
</ul>
</ul>
</div><h1 id="-markdown-markdig-net">
        <a href="#-markdown-markdig-net" class="header-anchor">
          Робота з Markdown через Markdig в .NET
        </a>
      </h1><h2 id="-">
        <a href="#-" class="header-anchor">
          Базова конфігурація
        </a>
      </h2><p>Спочатку потрібно встановити пакет Markdig через NuGet:</p>
<pre><code class="hljs language-bash">dotnet add package Markdig</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          Приклад базового використання
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">using</span> Markdig;
<span class="hljs-keyword">using</span> Markdig.Syntax;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MarkdownProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MarkdownProcessor</span>()</span>
    {
        <span class="hljs-comment">// Налаштування пайплайну з усіма розширеннями</span>
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .UseBootstrap() <span class="hljs-comment">// Для Bootstrap класів</span>
            .UseEmojiAndSmiley() <span class="hljs-comment">// Для емодзі</span>
            .UseMediaLinks() <span class="hljs-comment">// Для відео посилань</span>
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">RenderHtml</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">return</span> Markdown.ToHtml(markdown, _pipeline);
    }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          Сегментація контенту по розділах
        </a>
      </h2><p>Для розбиття контенту на розділи можна використовувати парсинг заголовків:</p>
<pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ContentSegmenter</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ContentSegmenter</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;ContentSection&gt; <span class="hljs-title">SegmentByHeadings</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        <span class="hljs-keyword">var</span> sections = <span class="hljs-keyword">new</span> List&lt;ContentSection&gt;();
        <span class="hljs-keyword">var</span> currentSection = <span class="hljs-keyword">new</span> ContentSection();
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> block <span class="hljs-keyword">in</span> document)
        {
            <span class="hljs-keyword">if</span> (block <span class="hljs-keyword">is</span> HeadingBlock heading)
            {
                <span class="hljs-comment">// Якщо знайшли новий заголовок, зберігаємо попередню секцію</span>
                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(currentSection.Title))
                {
                    sections.Add(currentSection);
                    currentSection = <span class="hljs-keyword">new</span> ContentSection();
                }
                
                currentSection.Title = heading.Inline?.FirstChild?.ToString();
                currentSection.Level = heading.Level;
            }
            <span class="hljs-keyword">else</span>
            {
                <span class="hljs-comment">// Додаємо контент до поточної секції</span>
                currentSection.Content.Add(block);
            }
        }
        
        <span class="hljs-comment">// Додаємо останню секцію</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(currentSection.Title))
        {
            sections.Add(currentSection);
        }
        
        <span class="hljs-keyword">return</span> sections;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ContentSection</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> Level { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;Block&gt; Content { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          Обробка медіа контенту
        </a>
      </h2><h3 id="-">
        <a href="#-" class="header-anchor">
          Відео посилання
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MediaProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MediaProcessor</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseMediaLinks() <span class="hljs-comment">// Активуємо підтримку медіа посилань</span>
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ProcessVideoLinks</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-comment">// Кастомний обробник для відео посилань</span>
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> link <span class="hljs-keyword">in</span> document.Descendants&lt;LinkInline&gt;())
        {
            <span class="hljs-keyword">if</span> (IsVideoUrl(link.Url))
            {
                <span class="hljs-comment">// Конвертуємо посилання у вбудований плеєр</span>
                <span class="hljs-keyword">var</span> videoEmbed = GenerateVideoEmbed(link.Url);
                <span class="hljs-comment">// Заміняємо посилання на вбудований код</span>
                link.Url = videoEmbed;
            }
        }

        <span class="hljs-keyword">return</span> Markdown.ToHtml(document, _pipeline);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">IsVideoUrl</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span>
    {
        <span class="hljs-keyword">return</span> url?.Contains(<span class="hljs-string">&quot;youtube.com&quot;</span>) == <span class="hljs-literal">true</span> || 
               url?.Contains(<span class="hljs-string">&quot;vimeo.com&quot;</span>) == <span class="hljs-literal">true</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">GenerateVideoEmbed</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> url</span>)</span>
    {
        <span class="hljs-comment">// Приклад для YouTube</span>
        <span class="hljs-keyword">if</span> (url.Contains(<span class="hljs-string">&quot;youtube.com&quot;</span>))
        {
            <span class="hljs-keyword">var</span> videoId = ExtractYouTubeId(url);
            <span class="hljs-keyword">return</span> <span class="hljs-string">$@&quot;&lt;div class=&quot;&quot;video-container&quot;&quot;&gt;
                       &lt;iframe width=&quot;&quot;560&quot;&quot; height=&quot;&quot;315&quot;&quot; 
                               src=&quot;&quot;https://www.youtube.com/embed/<span class="hljs-subst">{videoId}</span>&quot;&quot; 
                               frameborder=&quot;&quot;0&quot;&quot; allowfullscreen&gt;
                       &lt;/iframe&gt;
                     &lt;/div&gt;&quot;</span>;
        }
        <span class="hljs-keyword">return</span> url;
    }
}</code></pre><h3 id="-">
        <a href="#-" class="header-anchor">
          Обробка зображень
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ImageProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ImageProcessor</span>()</span>
    {
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .Build();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ProcessImages</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> markdown</span>)</span>
    {
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> image <span class="hljs-keyword">in</span> document.Descendants&lt;LinkInline&gt;().Where(x =&gt; x.IsImage))
        {
            <span class="hljs-comment">// Додаємо додаткові атрибути до зображення</span>
            image.GetAttributes().AddClass(<span class="hljs-string">&quot;img-fluid&quot;</span>);
            
            <span class="hljs-comment">// Перевіряємо шлях зображення</span>
            <span class="hljs-keyword">if</span> (!image.Url.StartsWith(<span class="hljs-string">&quot;http&quot;</span>))
            {
                <span class="hljs-comment">// Конвертуємо відносний шлях в абсолютний</span>
                image.Url = ConvertToAbsolutePath(image.Url);
            }
            
            <span class="hljs-comment">// Додаємо обробку помилок завантаження</span>
            image.GetAttributes().AddProperty(<span class="hljs-string">&quot;onerror&quot;</span>, <span class="hljs-string">&quot;this.onerror=null;this.src=&#x27;placeholder.png&#x27;;&quot;</span>);
        }

        <span class="hljs-keyword">return</span> Markdown.ToHtml(document, _pipeline);
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">ConvertToAbsolutePath</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> relativePath</span>)</span>
    {
        <span class="hljs-comment">// Логіка конвертації відносного шляху в абсолютний</span>
        <span class="hljs-keyword">var</span> baseUrl = <span class="hljs-string">&quot;https://your-domain.com/images/&quot;</span>;
        <span class="hljs-keyword">return</span> Path.Combine(baseUrl, relativePath).Replace(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);
    }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          Повний приклад використання
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">MarkdownDocumentProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ContentSegmenter _segmenter;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MediaProcessor _mediaProcessor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ImageProcessor _imageProcessor;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MarkdownDocumentProcessor</span>()</span>
    {
        _segmenter = <span class="hljs-keyword">new</span> ContentSegmenter();
        _mediaProcessor = <span class="hljs-keyword">new</span> MediaProcessor();
        _imageProcessor = <span class="hljs-keyword">new</span> ImageProcessor();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;ProcessedDocument&gt; <span class="hljs-title">ProcessDocumentAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> filePath</span>)</span>
    {
        <span class="hljs-keyword">var</span> markdown = <span class="hljs-keyword">await</span> File.ReadAllTextAsync(filePath);
        
        <span class="hljs-comment">// Розбиваємо на секції</span>
        <span class="hljs-keyword">var</span> sections = _segmenter.SegmentByHeadings(markdown);
        
        <span class="hljs-comment">// Обробляємо кожну секцію</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> section <span class="hljs-keyword">in</span> sections)
        {
            <span class="hljs-keyword">var</span> sectionContent = <span class="hljs-built_in">string</span>.Join(<span class="hljs-string">&quot;\n&quot;</span>, section.Content);
            
            <span class="hljs-comment">// Обробляємо медіа</span>
            sectionContent = _mediaProcessor.ProcessVideoLinks(sectionContent);
            
            <span class="hljs-comment">// Обробляємо зображення</span>
            sectionContent = _imageProcessor.ProcessImages(sectionContent);
            
            section.ProcessedContent = sectionContent;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ProcessedDocument
        {
            Title = sections.FirstOrDefault()?.Title ?? Path.GetFileNameWithoutExtension(filePath),
            Sections = sections
        };
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProcessedDocument</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> List&lt;ContentSection&gt; Sections { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> Dictionary&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; Metadata { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}</code></pre><h2 id="-">
        <a href="#-" class="header-anchor">
          Рекомендації та найкращі практики
        </a>
      </h2><ol>
<li><p><strong>Кешування</strong>:</p>
<ul>
<li>Кешуйте скомпільований HTML для часто використовуваних документів</li>
<li>Використовуйте версіонування для інвалідації кешу</li>
</ul>
</li>
<li><p><strong>Безпека</strong>:</p>
<ul>
<li>Використовуйте <code>UseAdvancedExtensions().DisableHtml()</code> для заборони HTML</li>
<li>Валідуйте всі зовнішні посилання</li>
<li>Використовуйте білий список дозволених доменів для зображень</li>
</ul>
</li>
<li><p><strong>Продуктивність</strong>:</p>
<ul>
<li>Використовуйте асинхронні операції для завантаження файлів</li>
<li>Реалізуйте ліниве завантаження для великих документів</li>
<li>Оптимізуйте зображення перед збереженням</li>
</ul>
</li>
<li><p><strong>Підтримка</strong>:</p>
<ul>
<li>Ведіть лог помилок парсингу</li>
<li>Реалізуйте механізм відновлення при помилках</li>
<li>Додайте валідацію структури документа</li>
</ul>
</li>
</ol>
<h2 id="-telegram-">
        <a href="#-telegram-" class="header-anchor">
          Специфіка використання для Telegram бота
        </a>
      </h2><h3 id="-markdown-telegram">
        <a href="#-markdown-telegram" class="header-anchor">
          Конвертація Markdown в повідомлення Telegram
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">TelegramMarkdownProcessor</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> MarkdownPipeline _pipeline;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> _mediaBasePath;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TelegramMarkdownProcessor</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mediaBasePath</span>)</span>
    {
        _mediaBasePath = mediaBasePath;
        _pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
            .UseAdvancedExtensions()
            .DisableHtml() <span class="hljs-comment">// Для безпеки</span>
            .UseEmphasisExtras() <span class="hljs-comment">// Для додаткового форматування</span>
            .UseEmojiAndSmiley()
            .Build();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task&lt;List&lt;BotMessage&gt;&gt; ProcessMarkdownForTelegramAsync(<span class="hljs-built_in">string</span> markdown)
    {
        <span class="hljs-keyword">var</span> messages = <span class="hljs-keyword">new</span> List&lt;BotMessage&gt;();
        <span class="hljs-keyword">var</span> document = Markdown.Parse(markdown, _pipeline);
        <span class="hljs-keyword">var</span> currentTextBlock = <span class="hljs-keyword">new</span> StringBuilder();
        
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> block <span class="hljs-keyword">in</span> document)
        {
            <span class="hljs-keyword">switch</span> (block)
            {
                <span class="hljs-keyword">case</span> HeadingBlock heading:
                    <span class="hljs-comment">// Якщо є накопичений текст, додаємо його як повідомлення</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }
                    
                    <span class="hljs-comment">// Форматуємо заголовок</span>
                    <span class="hljs-keyword">var</span> headingText = <span class="hljs-string">$&quot;*<span class="hljs-subst">{EscapeMarkdown(heading.Inline?.FirstChild?.ToString())}</span>*\n\n&quot;</span>;
                    currentTextBlock.Append(headingText);
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> ParagraphBlock paragraph:
                    <span class="hljs-keyword">var</span> text = paragraph.Inline?.FirstChild?.ToString();
                    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(text))
                    {
                        currentTextBlock.Append(EscapeMarkdown(text)).Append(<span class="hljs-string">&quot;\n\n&quot;</span>);
                    }
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> LinkInline link <span class="hljs-keyword">when</span> link.IsImage:
                    <span class="hljs-comment">// Якщо є накопичений текст, додаємо його як повідомлення</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }

                    <span class="hljs-comment">// Створюємо повідомлення з зображенням</span>
                    <span class="hljs-keyword">var</span> imagePath = Path.Combine(_mediaBasePath, link.Url);
                    messages.Add(<span class="hljs-keyword">new</span> PhotoMessage(link.Title ?? <span class="hljs-string">&quot;&quot;</span>, imagePath));
                    <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">case</span> FencedCodeBlock codeBlock:
                    <span class="hljs-comment">// Якщо є накопичений текст, додаємо його як повідомлення</span>
                    <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
                    {
                        messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                        currentTextBlock.Clear();
                    }

                    <span class="hljs-comment">// Форматуємо код для Telegram</span>
                    <span class="hljs-keyword">var</span> code = <span class="hljs-string">$&quot;```<span class="hljs-subst">{codeBlock.Info}</span>\n<span class="hljs-subst">{codeBlock.Lines}</span>\n```&quot;</span>;
                    messages.Add(<span class="hljs-keyword">new</span> TextMessage(code, ParseMode.MarkdownV2));
                    <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-comment">// Перевіряємо розмір поточного текстового блоку</span>
            <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">3500</span>) <span class="hljs-comment">// Telegram ліміт ~4096</span>
            {
                messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
                currentTextBlock.Clear();
            }
        }

        <span class="hljs-comment">// Додаємо залишковий текст</span>
        <span class="hljs-keyword">if</span> (currentTextBlock.Length &gt; <span class="hljs-number">0</span>)
        {
            messages.Add(<span class="hljs-keyword">new</span> TextMessage(currentTextBlock.ToString(), ParseMode.MarkdownV2));
        }

        <span class="hljs-keyword">return</span> messages;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-built_in">string</span> <span class="hljs-title">EscapeMarkdown</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>? text</span>)</span>
    {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(text)) <span class="hljs-keyword">return</span> <span class="hljs-built_in">string</span>.Empty;
        
        <span class="hljs-comment">// Екрануємо спеціальні символи для MarkdownV2</span>
        <span class="hljs-keyword">return</span> text
            .Replace(<span class="hljs-string">&quot;_&quot;</span>, <span class="hljs-string">&quot;\\_&quot;</span>)
            .Replace(<span class="hljs-string">&quot;*&quot;</span>, <span class="hljs-string">&quot;\\*&quot;</span>)
            .Replace(<span class="hljs-string">&quot;[&quot;</span>, <span class="hljs-string">&quot;\\[&quot;</span>)
            .Replace(<span class="hljs-string">&quot;]&quot;</span>, <span class="hljs-string">&quot;\\]&quot;</span>)
            .Replace(<span class="hljs-string">&quot;(&quot;</span>, <span class="hljs-string">&quot;\\(&quot;</span>)
            .Replace(<span class="hljs-string">&quot;)&quot;</span>, <span class="hljs-string">&quot;\\)&quot;</span>)
            .Replace(<span class="hljs-string">&quot;~&quot;</span>, <span class="hljs-string">&quot;\\~&quot;</span>)
            .Replace(<span class="hljs-string">&quot;`&quot;</span>, <span class="hljs-string">&quot;\\`&quot;</span>)
            .Replace(<span class="hljs-string">&quot;&gt;&quot;</span>, <span class="hljs-string">&quot;\\&gt;&quot;</span>)
            .Replace(<span class="hljs-string">&quot;#&quot;</span>, <span class="hljs-string">&quot;\\#&quot;</span>)
            .Replace(<span class="hljs-string">&quot;+&quot;</span>, <span class="hljs-string">&quot;\\+&quot;</span>)
            .Replace(<span class="hljs-string">&quot;-&quot;</span>, <span class="hljs-string">&quot;\\-&quot;</span>)
            .Replace(<span class="hljs-string">&quot;=&quot;</span>, <span class="hljs-string">&quot;\\=&quot;</span>)
            .Replace(<span class="hljs-string">&quot;|&quot;</span>, <span class="hljs-string">&quot;\\|&quot;</span>)
            .Replace(<span class="hljs-string">&quot;.&quot;</span>, <span class="hljs-string">&quot;\\.&quot;</span>)
            .Replace(<span class="hljs-string">&quot;!&quot;</span>, <span class="hljs-string">&quot;\\!&quot;</span>);
    }
}

<span class="hljs-comment">// Моделі повідомлень</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">record</span> <span class="hljs-title">BotMessage</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">TextMessage</span>(<span class="hljs-params">
    <span class="hljs-built_in">string</span> Text,
    ParseMode ParseMode = ParseMode.MarkdownV2
</span>) : BotMessage</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">PhotoMessage</span>(<span class="hljs-params">
    <span class="hljs-built_in">string</span> Caption,
    <span class="hljs-built_in">string</span> PhotoPath,
    ParseMode ParseMode = ParseMode.MarkdownV2
</span>) : BotMessage</span>;

<span class="hljs-keyword">public</span> <span class="hljs-built_in">enum</span> ParseMode
{
    MarkdownV2,
    HTML,
    Markdown
}</code></pre><h3 id="-">
        <a href="#-" class="header-anchor">
          Приклад використання в боті
        </a>
      </h3><pre><code class="hljs language-csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LessonHandler</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> TelegramMarkdownProcessor _markdownProcessor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ITelegramBotClient _botClient;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">LessonHandler</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> mediaBasePath, ITelegramBotClient botClient</span>)</span>
    {
        _markdownProcessor = <span class="hljs-keyword">new</span> TelegramMarkdownProcessor(mediaBasePath);
        _botClient = botClient;
    }
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SendLessonAsync</span>(<span class="hljs-params"><span class="hljs-built_in">long</span> chatId, <span class="hljs-built_in">string</span> lessonContent</span>)</span>
    {
        <span class="hljs-comment">// Обробляємо markdown контент</span>
        <span class="hljs-keyword">var</span> messages = <span class="hljs-keyword">await</span> _markdownProcessor.ProcessMarkdownForTelegramAsync(lessonContent);
        
        <span class="hljs-comment">// Відправляємо повідомлення</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> message <span class="hljs-keyword">in</span> messages)
        {
            <span class="hljs-keyword">switch</span> (message)
            {
                <span class="hljs-keyword">case</span> TextMessage textMessage:
                    <span class="hljs-keyword">await</span> _botClient.SendTextMessageAsync(
                        chatId: chatId,
                        text: textMessage.Text,
                        parseMode: textMessage.ParseMode);
                    <span class="hljs-keyword">break</span>;
                    
                <span class="hljs-keyword">case</span> PhotoMessage photoMessage:
                    <span class="hljs-keyword">await</span> <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> photoStream = File.OpenRead(photoMessage.PhotoPath);
                    <span class="hljs-keyword">await</span> _botClient.SendPhotoAsync(
                        chatId: chatId,
                        photo: InputFile.FromStream(photoStream),
                        caption: photoMessage.Caption,
                        parseMode: photoMessage.ParseMode);
                    <span class="hljs-keyword">break</span>;
            }
            
            <span class="hljs-comment">// Додаємо затримку між повідомленнями</span>
            <span class="hljs-keyword">await</span> Task.Delay(TimeSpan.FromMilliseconds(<span class="hljs-number">100</span>));
        }
    }
}</code></pre><h3 id="-telegram">
        <a href="#-telegram" class="header-anchor">
          Особливості та обмеження для Telegram
        </a>
      </h3><ol>
<li><p><strong>Розмір повідомлень</strong>:</p>
<ul>
<li>Максимальний розмір текстового повідомлення: 4096 символів</li>
<li>Необхідно розбивати великі тексти на частини</li>
</ul>
</li>
<li><p><strong>Форматування</strong>:</p>
<ul>
<li>Використовуйте MarkdownV2 для кращої сумісності</li>
<li>Обов&#39;язково екрануйте спеціальні символи</li>
<li>Підтримуються: <code>*bold*, _italic_, __underline__, ~strike~, ||spoiler||, </code>code<code>, ```pre```, [text](URL)</code></li>
</ul>
</li>
<li><p><strong>Медіа контент</strong>:</p>
<ul>
<li>Фото: максимум 10 МБ</li>
<li>Відео: максимум 50 МБ</li>
<li>Аудіо: максимум 50 МБ</li>
<li>Файли: максимум 50 МБ</li>
</ul>
</li>
<li><p><strong>Оптимізація</strong>:</p>
<ul>
<li>Використовуйте Media Groups для відправки декількох фото</li>
<li>Кешуйте file_id для повторного використання медіа</li>
<li>Оптимізуйте зображення перед відправкою</li>
</ul>
</li>
</ol>
<h2 id="-markdig">
        <a href="#-markdig" class="header-anchor">
          Корисні розширення Markdig
        </a>
      </h2><pre><code class="hljs language-csharp"><span class="hljs-keyword">var</span> pipeline = <span class="hljs-keyword">new</span> MarkdownPipelineBuilder()
    .UseAdvancedExtensions()
    .DisableHtml() <span class="hljs-comment">// Для безпеки в Telegram</span>
    .UseEmojiAndSmiley()
    .UseEmphasisExtras()
    .UseAutoLinks()
    .UseTaskLists()
    .UseCustomContainers()
    .UsePipeTables()
    .Build();</code></pre>
        </div>
      
      </div>
    </main>
  </div>
</body>
</html>